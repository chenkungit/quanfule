webpackJsonp([1],{"7h0A":function(t,e){},G2ar:function(t,e){},GK4k:function(t,e){},JCYL:function(t,e){},K3pB:function(t,e){},K8fa:function(t,e){},KYfL:function(t,e,a){t.exports=a.p+"static/img/adminlogo.a64c607.jpg"},N05R:function(t,e){},NEWj:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};a.d(i,"increment",function(){return _}),a.d(i,"decrement",function(){return h}),a.d(i,"settoken",function(){return f});var r={};a.d(r,"getCount",function(){return Ka}),a.d(r,"getToken",function(){return Xa}),a.d(r,"getorderInfo",function(){return Za});var o=a("7+uW"),s=a("Dd8w"),n=a.n(s),l=a("NYxO"),d={name:"app",components:{},methods:n()({},Object(l.b)(["settoken"])),mounted:function(){this.settoken()}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("keep-alive",[this.$route.meta.keepAlive?e("router-view"):this._e()],1)],1),this._v(" "),this.$route.meta.keepAlive?this._e():e("router-view")],1)},staticRenderFns:[]};var u=a("VU/8")(d,c,!1,function(t){a("Za/7")},null,null).exports,m=a("zL8q"),p=a.n(m),_=(a("tvR6"),function(t){(0,t.commit)("INCREMENT")}),h=function(t){(0,t.commit)("DECREMENT")},f=function(t){(0,t.commit)("SETTOKEN")},g=a("//Fk"),v=a.n(g),b=a("mtWM"),y=a.n(b),F=(a("mw3O"),a("/ocq")),k=a("mvHQ"),w=a.n(k),x={data:function(){return{logining:!1,ruleForm2:{account:"admin",checkPass:""},rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0}},created:function(){},methods:n()({},Object(l.b)(["settoken"]),{handleSubmit2:function(t){var e=this;this.$refs.ruleForm2.validate(function(t){if(!t)return console.log("error submit!!"),!1;var a={account:e.ruleForm2.account,password:e.ruleForm2.checkPass};Fe(a).then(function(t){200!==t.code?alert(t.msg):(e.logining=!0,sessionStorage.setItem("data",""),sessionStorage.setItem("data",w()(t)),e.checked?(e.setcookie("name999",e.ruleForm2.account,7),e.setcookie("password999",e.ruleForm2.checkPass,7)):(e.setcookie("name999","",-1),e.setcookie("password999","",-1)),e.$router.push({path:"/"}),e.settoken())})})}}),mounted:function(){this.getcookie("name999")&&(this.ruleForm2.account=this.getcookie("name999"),this.ruleForm2.checkPass=this.getcookie("password999"),this.handleSubmit2())}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"background"}},[a("div",{staticStyle:{position:"fixed","z-index":"888",left:"50%","margin-left":"-211px"}},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-container",attrs:{model:t.ruleForm2,rules:t.rules2,"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[t._v("后台系统登录")]),t._v(" "),a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号",size:"medium"},model:{value:t.ruleForm2.account,callback:function(e){t.$set(t.ruleForm2,"account",e)},expression:"ruleForm2.account"}},[a("template",{slot:"prepend"},[t._v("账号")])],2)],1),t._v(" "),a("el-form-item",{attrs:{prop:"checkPass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码",size:"medium"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit2(e)}},model:{value:t.ruleForm2.checkPass,callback:function(e){t.$set(t.ruleForm2,"checkPass",e)},expression:"ruleForm2.checkPass"}},[a("template",{slot:"prepend"},[t._v("密码")])],2)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"100%","text-aligin":"center"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.logining,size:"medium"},nativeOn:{click:function(e){return e.preventDefault(),t.handleSubmit2(e)}}},[t._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var S=a("VU/8")(x,$,!1,function(t){a("NEWj"),a("GK4k")},"data-v-29633128",null).exports,L={render:function(){var t=this.$createElement;return(this._self._c||t)("p",{staticClass:"page-container"},[this._v("\n    404 page not found")])},staticRenderFns:[]};var V=a("VU/8")(null,L,!1,function(t){a("N05R")},"data-v-59dde4de",null).exports,C=(a("wUfp"),a("e0XP"),a("I95x")),D=a.n(C),O=a("KYfL"),I=a.n(O),E={data:function(){return{isCollapse:!1,RoutesTags:[],viewtags:[],sysUserAvatar:I.a,isfullscreen:!1,defActive:"",is_bang:"",bangFormVisible:!1,bangForm:{user_name:""}}},methods:{isActive:function(t){return t===this.$route.path},createTag:function(t,e){this.RoutesTags.push({name:t,path:e}),this.RoutesTags=this.uniqeByKeys(this.RoutesTags,["name"]);for(var a=0,i=0;i<this.RoutesTags.length;i++)this.RoutesTags[i].name==t&&(a=i);this.RoutesTags.length-a>=6?this.viewtags=this.RoutesTags.slice(a,a+6):this.viewtags=this.RoutesTags.slice(-6)},handleClose:function(t,e){this.RoutesTags.splice(this.RoutesTags.indexOf(t),1),this.viewtags=this.RoutesTags.slice(-6),0==this.viewtags.length?this.$router.push("/"):this.$router.push(this.viewtags[this.viewtags.length-1].path),e.preventDefault()},fullScreen:function(){if(!D.a.enabled)return this.$message({message:"you browser can not work",type:"warning"}),!1;D.a.toggle()},dropOut:function(){var t=this;this.$confirm("确认退出吗?","提示",{}).then(function(){t.setcookie("name999","","-1"),t.setcookie("password999","","-1"),sessionStorage.removeItem("user"),t.$router.push("/login"),location.reload()})},changeNav:function(){1==this.isCollapse?this.isCollapse=!1:this.isCollapse=!0}},mounted:function(){this.defActive=this.$route.path,this.is_bang=JSON.parse(sessionStorage.getItem("data")).data.anthor_name}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("div",{staticClass:"nav-menu",staticStyle:{"min-width":"0px",width:"auto"},attrs:{id:"nav-menu"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"100%"},attrs:{"default-active":t.defActive,"active-text-color":"#ffd04b",collapse:t.isCollapse,router:""}},[a("el-menu-item",{staticStyle:{"border-bottom":"1px solid #e6e6e6",height:"60px"},attrs:{index:"/"}},[a("span",{staticStyle:{"font-size":"20px"},attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"fa fa-home",attrs:{"aria-hidden":"true"}}),t._v("后台")])]),t._v(" "),t._l(t.$router.options.routes,function(e,i){return!e.hidden&&e.children.length>1?a("el-submenu",{key:i+"1",attrs:{index:i+"1"}},[a("template",{slot:"title"},[a("i",{class:e.iconCls}),t._v(" "),a("span",[t._v(t._s(e.name))])]),t._v(" "),a("el-menu-item-group",{staticStyle:{"z-index":"999999"}},t._l(e.children,function(e,i){return a("el-menu-item",{key:e.path,attrs:{index:e.path},on:{click:function(a){return t.createTag(e.name,e.path)}}},[t._v(t._s(e.name))])}),1)],2):t._e()}),t._v(" "),t._l(t.$router.options.routes,function(e,i){return e.hidden||1!=e.children.length?t._e():a("el-menu-item",{key:e.children[0].path,attrs:{index:e.children[0].path}},[a("i",{class:e.iconCls}),t._v(" "),a("span",{attrs:{slot:"title"},on:{click:function(a){return t.createTag(e.children[0].name,e.children[0].path)}},slot:"title"},[t._v(t._s(e.children[0].name))])])})],2)],1),t._v(" "),a("el-container",[a("el-header",{staticStyle:{"border-bottom":"1px solid #e6e6e6",padding:"0"}},[a("div",{staticClass:"nav-hidden",on:{click:t.changeNav}},[a("i",{staticClass:"fa fa-align-justify"})]),t._v(" "),a("div",{staticClass:"createTag"},t._l(t.viewtags,function(e){return a("router-link",{key:e.path,staticClass:"tabs-view",attrs:{to:e.path}},[a("el-tag",{attrs:{closable:!0,type:t.isActive(e.path)?"danger":"",size:"medium"},on:{close:function(a){return t.handleClose(e,a)}}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1)}),1),t._v(" "),a("div",{staticClass:"login-out"},[a("el-dropdown",{attrs:{size:"medium"}},[a("span",{staticClass:"el-dropdown-link"},[a("img",{staticStyle:{width:"40px",height:"40px","margin-top":"10px"},attrs:{src:t.sysUserAvatar,alt:""}})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.dropOut(e)}}},[t._v("退出")])],1)],1)],1),t._v(" "),a("div",{staticClass:"fullscreen",on:{click:t.fullScreen}},[a("i",{staticClass:"fa fa-arrows-alt"})])]),t._v(" "),a("el-main",{staticClass:"main"},[a("el-breadcrumb",{staticClass:"breadcrumb-inner",attrs:{separator:"/"}},t._l(t.$route.matched,function(e){return a("el-breadcrumb-item",{key:e.path},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t")])}),1),t._v(" "),a("div",{staticClass:"main-con"},[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var A=a("VU/8")(E,N,!1,function(t){a("xOV4")},null,null).exports,R={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("主页")])])}]},z=a("VU/8")(null,R,!1,null,null,null).exports,j={data:function(){return{grade:"",goodData:[],tableloading:!0,page:1,code:"",pagecount:0,limit:50,count:0,keywords:"",categoryOptions:[],props:{label:"cat_name",value:"cat_id",children:"child"},category:[],is_saleoptions:[{label:"所有",value:99},{label:"上架",value:0},{label:"下架",value:1}],is_sale:99,is_sale_edit:"",sortForm:{},push_ids:[],is_saleEditoptions:[{label:"上架",value:0},{label:"下架",value:1}],editStatusVisible:!1}},methods:{getoptions:function(){var t=JSON.parse(sessionStorage.getItem("data"));this.categoryOptions=t.data.argument.category},getGoods:function(){var t=this;this.tableloading=!0;var e={};""!=this.keywords&&(e.keywords=this.keywords),e.page=this.page,e.limit=this.limit,""!=this.code&&(e.code=this.code),2==this.category.length&&(e.category=this.category[this.category.length-1]),0!=this.brand&&(e.brand=this.brand),0!=this.suppliers&&(e.supplier=this.suppliers),99!=this.is_sale&&(e.is_sale=this.is_sale),fa(e).then(function(e){200==e.data.code&&(t.goodData=e.data.data.item,t.pagecount=e.data.data.pagecount,t.count=e.data.data.count,t.tableloading=!1)})},handleslecttable:function(t){this.push_ids=t.map(function(t){return t.id})},handleSort:function(t,e){"排序"==e.label&&(this.$set(t,"isSort",!0),this.sortForm.id=t.id)},inputBlur:function(t){var e=this;this.$set(t,"isSort",!1),this.sortForm.ord=Number(t.ord),Va(this.sortForm).then(function(t){200==t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message({message:t.data.msg,type:"warning"})})},handleCurrentChange:function(t){this.page=t,this.getGoods()},handleSizeChange:function(t){this.limit=t,this.getGoods()},handleAdd:function(){this.$router.push({path:"/goods/add"})},handleEdit:function(t){this.$router.push({name:"商品编辑",params:t,query:{id:t.id}})},allEditStatus:function(){this.editStatusVisible=!0},editStatusSubmit:function(){var t=this;this.$confirm("确认修改选中商品的状态?","提示",{type:"warning"}).then(function(){va({is_sale:t.is_sale_edit,gsup_id_arr:t.push_ids}).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.editStatusVisible=!1,t.is_sale_edit="",t.getGoods()):t.$message({message:e.msg,type:"warning"})})})},handleSpot:function(t){this.$router.push({path:"/goods/spot/"+t.id})},handleDel:function(t){var e=this;this.$confirm("确认删除该商品吗?","提示",{type:"warning"}).then(function(){La({id:t.id}).then(function(t){200==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.getGoods()):e.$message({message:t.data.msg,type:"warning"})})})},handleClear:function(){var t=this;this.$confirm("确认清除吗?","提示",{type:"warning"}).then(function(){He({arg:"Goods_id:*"}).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.getGoods()):t.$message({message:e.msg,type:"warning"})})})},handleClearList:function(){var t=this;this.$confirm("确认清除吗?","提示",{type:"warning"}).then(function(){Me({arg:"product_list_index:*"}).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.getGoods()):t.$message({message:e.msg,type:"warning"})})})}},mounted:function(){this.getGoods(),this.getoptions()},activated:function(){this.getGoods(),this.getoptions()}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"输入关键字",clearable:""},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1),t._v(" "),a("el-form-item",[a("el-cascader",{attrs:{options:t.categoryOptions,props:t.props,placeholder:"请选择商品分类"},on:{change:t.getGoods},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}})],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getGoods},model:{value:t.is_sale,callback:function(e){t.is_sale=e},expression:"is_sale"}},t._l(t.is_saleoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getGoods}},[t._v("搜索")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-printer"},on:{click:t.allEditStatus}},[t._v("批量修改状态")])],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger"},on:{click:t.handleClearList}},[t._v("清除列表缓存")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.goodData,border:"","element-loading-text":"拼命加载中"},on:{"cell-dblclick":t.handleSort,"selection-change":t.handleslecttable}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cat_name",label:"类别",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"售价",width:"65"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"现货库存",width:"95",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"排序",prop:"ord",width:"80",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isSort?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{size:"mini",placeholder:"请输入排序"},on:{blur:function(a){return t.inputBlur(e.row)}},model:{value:e.row.ord,callback:function(a){t.$set(e.row,"ord",a)},expression:"scope.row.ord"}}):t._e(),t._v(" "),e.row.isSort?t._e():a("p",[t._v(t._s(e.row.ord))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"is_sale",label:"上架",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:0==e.row.is_sale?"color:green":1==e.row.is_sale?"color:red":"color:#ff7e00"},[t._v(t._s(0==e.row.is_sale?"上架中":1==e.row.is_sale?"已下架":2==e.row.is_sale?"即将上架":"暂无现货"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"margin-top":"6px","margin-left":"0"},attrs:{icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"6px"},on:{click:function(a){return t.handleSpot(e.row)}}},[t._v("现货管理")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[50,100,200,400],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"修改商品状态",visible:t.editStatusVisible},on:{"update:visible":function(e){t.editStatusVisible=e}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.is_sale_edit,callback:function(e){t.is_sale_edit=e},expression:"is_sale_edit"}},t._l(t.is_saleEditoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editStatusVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editStatusSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var M=a("VU/8")(j,T,!1,function(t){a("wCN1")},null,null).exports,H=a("+6Bu"),q=a.n(H),P=a("pFYg"),G=a.n(P),U={data:function(){return{options:[],casclass:[],goodslists:[],goods:[],checkAll:!0,isIndeterminate:!0,alldata:[],loading:!1}},methods:{getoptions:function(){this.options=[];var t=JSON.parse(sessionStorage.getItem("data"));for(var e in t.data.argument.category){var a={label:t.data.argument.category[e].cat_name,value:t.data.argument.category[e].cat_id,children:[]};for(var i in t.data.argument.category[e].child){var r={label:t.data.argument.category[e].child[i].cat_name,value:t.data.argument.category[e].child[i].cat_id};a.children.push(r)}this.options.push(a)}},handleItemChange:function(t){var e=this;this.loading=!0,Le(t[t.length-1]).then(function(t){200==t.data.code&&(e.goodslists=t.data.data,e.loading=!1)})},handleCheckAllChange:function(t){var e=[];for(var a in this.goodslists)e.push(this.goodslists[a].sup_id);this.goods=t?e:[],this.isIndeterminate=!1},addall:function(){for(var t in this.alldata=[],this.goodslists)for(var e in this.goods)if(this.goods[e]==this.goodslists[t].sup_id){var a={id:this.goodslists[t].sup_id,name:this.goodslists[t].name,bigid:this.goodslists[t].shp_id};this.alldata.push(a)}this.alldata=this.uniqeByKeys(this.alldata,["id"]),this.$emit("faff",this.alldata)}},mounted:function(){this.getoptions()}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-cascader",{attrs:{options:t.options,value:t.casclass},on:{change:t.handleItemChange}}),t._v(" "),a("div",{staticClass:"goods"},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),a("el-checkbox-group",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],model:{value:t.goods,callback:function(e){t.goods=e},expression:"goods"}},t._l(t.goodslists,function(e){return a("el-checkbox",{key:e.sup_id,attrs:{label:e.sup_id}},[1==e.presell?a("span",{staticStyle:{color:"red"}},[t._v("[预售]")]):t._e(),t._v(t._s(e.name)+t._s(0==e.is_sale?"":1==e.is_sale?"（已下架）":"（即将上架）"))])}),1)],1),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addall}},[t._v("新增")])],1)},staticRenderFns:[]};var B={name:"edit-attr",data:function(){return{typeOptions:[{label:"请选择",value:0}],editAttrForm:{cat_id:"",original_cat_id:""},attrLists:[],goods_attr:[],form:[],sontabel:[],is_table:!1,originalCatId:"",fileIdArr:[]}},methods:{getGoodEditList:function(){var t=this;Sa({id:this.$route.query.id}).then(function(e){200==e.data.code&&(t.editAttrForm.cat_id=e.data.data.goods_info.cat_id,t.originalCatId=e.data.data.goods_info.cat_id,t.editAttrForm.original_cat_id=e.data.data.goods_info.original_cat_id,t.editData=e.data.data.goods_info,t.goods_attr=e.data.data.goods_attr,t.getAttrLists())})},getAttrLists:function(){var t=this;0==this.editAttrForm.cat_id||(this.fileIdArr=[],ya({cat_id:this.editAttrForm.cat_id}).then(function(e){if(200==e.data.code){var a=e.data.data,i=[],r=!1;for(var o in a){for(var s in t.goods_attr)a[o].attr_id==t.goods_attr[s].attr_id&&(i.push(n()({},a[o],t.goods_attr[s])),r=!0);r||i.push(a[o]),r=!1}var l=i[0].attr_id;i.forEach(function(t,e){t.values=t.attr_values.split("\n"),null!=t.img_url&&(t.img_url=t.img_url),t.attrValues=t.attr_value,t.showFile="",0==e?(t.isFirst=!0,t.attrList=[]):(t.attr_id==l?t.isFirst=!1:(t.isFirst=!0,t.attrList=[]),l=t.attr_id)}),t.attrLists=i}}))},editSubmit5:function(){var t=this;this.$confirm("确认提交吗？","提示",{}).then(function(){var e=[];for(var a in t.attrLists){var i={};if(t.attrLists[a].attr_id?i.attr_id=t.attrLists[a].attr_id:i.attr_id="",t.attrLists[a].attrValues?i.attr_value=t.attrLists[a].attrValues:i.attr_value="",t.attrLists[a].goods_attr_id?i.goods_attr_id=t.attrLists[a].goods_attr_id:i.goods_attr_id="",t.attrLists[a].img_id?i.img_id=t.attrLists[a].img_id:i.img_id="",t.attrLists[a].attr_img?i.img_url=t.attrLists[a].attr_img:null!=t.attrLists[a].img_url?i.img_url=t.attrLists[a].img_url:i.img_url="",void 0!=t.attrLists[a].attrValues&&e.push(i),t.attrLists[a].attrList&&0!=t.attrLists[a].attrList.length)for(var r in t.attrLists[a].attrList){var o={};t.attrLists[a].attrList[r].attr_id?o.attr_id=t.attrLists[a].attrList[r].attr_id:o.attr_id="",t.attrLists[a].attrList[r].attrValue?o.attr_value=t.attrLists[a].attrList[r].attrValue:o.attr_value="",t.attrLists[a].attrList[r].goods_attr_id?o.goods_attr_id=t.attrLists[a].attrList[r].goods_attr_id:o.goods_attr_id="",t.attrLists[a].attrList[r].img_id?o.img_id=t.attrLists[a].attrList[r].img_id:o.img_id="",t.attrLists[a].attrList[r].attr_img?o.img_url=t.attrLists[a].attrList[r].attr_img:null!=t.attrLists[a].attrList[r].img_url?o.img_url=t.attrLists[a].attrList[r].img_url:o.img_url="",""!=t.attrLists[a].attrList[r].attrValue&&e.push(o)}}var s={type:5,id:t.$route.query.id,cat_id:t.editAttrForm.cat_id,original_cat_id:t.originalCatId,attr:w()(e)};ga(s).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.getGoodEditList()):t.$message({message:e.msg,type:"warning"})})})},changeAttrValue:function(t){this.$set(this.attrLists,t,this.attrLists[t])},getGoodType:function(){var t=this;oa().then(function(e){200==e.data.code&&(t.typeOptions=t.typeOptions.concat(e.data.data.list))})},addAttr:function(t,e){t.attrList;var a=q()(t,["attrList"]);this.attrLists[e].attrList.push(a),this.$set(this.attrLists,e,this.attrLists[e])},decreaseAttr:function(t,e,a){1==t?(console.log(2),this.attrLists.splice(e,1),this.$set(this.attrLists,e,this.attrLists[e])):(this.attrLists[e].attrList.splice(a,1),this.$set(this.attrLists,e,this.attrLists[e])),console.log(this.attrLists)},changeImg:function(t,e,a){var i=this,r=e.target.files[0];console.log(r);var o=new FormData;o.append("img",r),qe(o).then(function(r){200==r.data.code?(null!=a?i.attrLists[t].attrList[a].attr_img=r.data.data.img_url:(i.attrLists[t].attr_img=r.data.data.img_url,i.attrLists[t].showFile=e.target.files[0].name),console.log(i.attrLists)):i.$message({message:r.data.msg,type:"warning"})})},change:function(t){this.$set(this.form,t,this.form[t])}},mounted:function(){this.getGoodEditList(),this.getGoodType()},watch:{attrLists:{handler:function(t,e){this.form=t}}}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"商品类型"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getAttrLists},model:{value:t.editAttrForm.cat_id,callback:function(e){t.$set(t.editAttrForm,"cat_id",e)},expression:"editAttrForm.cat_id"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),t._l(t.attrLists,function(e,i){return a("div",{key:i,staticClass:"mb15"},[a("tr",[a("td",{staticClass:"label"},[1==e.attr_type&&e.isFirst?a("i",{staticClass:"el-icon-plus",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.addAttr(e,i)}}}):t._e(),t._v(" "),1!=e.attr_type||e.isFirst?t._e():a("i",{staticClass:"el-icon-minus",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.decreaseAttr(1,i)}}}),t._v("\n          "+t._s(e.attr_name)+"\n        ")]),t._v(" "),a("td",{staticClass:"color-gray"},[""!=e.attr_values?a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",clearable:"",placeholder:"请选择"},on:{change:function(e){return t.changeAttrValue(i)}},model:{value:e.attrValues,callback:function(a){t.$set(e,"attrValues",a)},expression:"item.attrValues"}},t._l(e.values,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1):t._e(),t._v(" "),""==e.attr_values?a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.attr_value,callback:function(a){t.$set(e,"attr_value",a)},expression:"item.attr_value"}}):t._e()],1),t._v(" "),null!=e.img_url?a("td",[a("img",{staticStyle:{width:"40px",height:"40px",padding:"0 10px","margin-bottom":"-10px"},attrs:{src:e.img_url,alt:""}})]):t._e(),t._v(" "),1==e.attr_type?a("td",[a("input",{staticClass:"file",attrs:{id:i+e.attr_id+"upload",type:"file",name:"name"},on:{change:function(e){return t.changeImg(i,e)}}})]):t._e()]),t._v(" "),t._l(e.attrList,function(e,r){return a("div",{key:r,staticClass:"mt15"},[a("tr",[a("td",{staticClass:"label"},[1==e.attr_type?a("i",{staticClass:"el-icon-minus",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.decreaseAttr(2,i,r)}}}):t._e(),t._v(t._s(e.attr_name)+"\n          ")]),t._v(" "),a("td",{staticClass:"color-gray"},[""!=e.attr_values?a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.change(i)}},model:{value:t.form[i].attrList[r].attrValue,callback:function(e){t.$set(t.form[i].attrList[r],"attrValue",e)},expression:"form[index].attrList[idx].attrValue"}},t._l(e.values,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1):t._e(),t._v(" "),""==e.attr_values?a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form[i].attrList[r].attrValue,callback:function(e){t.$set(t.form[i].attrList[r],"attrValue",e)},expression:"form[index].attrList[idx].attrValue"}}):t._e()],1),t._v(" "),1==e.attr_type?a("td",[a("input",{staticClass:"file",attrs:{type:"file"},on:{change:function(e){return t.changeImg(i,e,r)}}})]):t._e()])])})],2)}),t._v(" "),a("div",{staticStyle:{"text-align":"center","padding-top":"20px"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmit5(e)}}},[t._v("确定")])],1)],2)],1)},staticRenderFns:[]};var K={components:{selectgoods:a("VU/8")(U,Y,!1,function(t){a("VPTJ")},null,null).exports,editAttr:a("VU/8")(B,J,!1,function(t){a("NKgp")},"data-v-d577d87e",null).exports},data:function(){return{type:1,activeName:"first",editData:[],album:"",img:"",goodDesc:"",desc:"",goodsData:{id:"",name:"",weight:"",ord:"",category:"",vs_id:"",price:"",pro_price:"",sale:!0,is_sale:"",album:"",is_fei5zhe:"",N_bei:0,youhui_desc:"",shipping_desc:"",tishi_desc:"",img:"",descpt:"",cat_id:"",attr:[],attr_img:[],rel_goods_id:"",regions:""},isReady:!1,descpt:"",goodsState:[{value:0,label:"上架"},{value:1,label:"下架"}],fileListImg:[],vs_idOptions:[],categoryOptions:[],category:[],props:{label:"cat_name",value:"cat_id",children:"child"},XcphotoData:[],photoVisible:!1,addphotoForm:{img_desc:"",is_show:1,img_original:null,sort:2},photoEditVisible:!1,descptConfig:{initialFrameHeight:500,scaleEnabled:!0,zIndex:"0"},askedConfig:{initialFrameHeight:500,scaleEnabled:!0,zIndex:"0"},editphotoForm:{img_id:"",is_show:""},editAttrForm:{cat_id:"",original_cat_id:""},attrLists:[],goods_attr:[],form:[],sontabel:[],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],ord:[{required:!0,message:"请选择排序",trigger:"blur"}],category:[{required:!0,message:"请选择商品分类",trigger:"blur"}],price:[{required:!0,message:"请输入售价",trigger:"blur"}]},formRules:{cat_id:[{required:!0,message:"请选择商品属性",trigger:"blur"}]},leafOnly:!0,typeOptions:[],originalCatId:"",fileIdArr:[],isReset:!1}},methods:{gettabledata:function(t){var e=this;t.forEach(function(t){var a={name:t.name,smallid:t.id};e.sontabel.push(a)}),this.sontabel=this.uniqeByKeys(this.sontabel,["smallid"])},addSonDelete:function(t,e){e.splice(t,1)},handleClick:function(t){this.type=t.index-0+1},getGoodEditList:function(){var t=this;this.isReady=!1,Sa({id:this.$route.query.id}).then(function(e){200==e.data.code&&(t.goodsData.attr=w()(e.data.data.goods_attr),t.editData=e.data.data.goods_info,t.goodsData.name=t.editData.name,t.goodsData.price=t.editData.price,t.goodsData.ord=t.editData.ord,t.goodsData.weight=t.editData.weight,t.goodsData.category=t.editData.category,t.goodsData.vs_id=t.editData.vs_id,""!=t.editData.img&&(t.goodsData.img=t.editData.img),t.goodsData.is_sale=t.editData.is_sale,t.goodsData.tishi_desc=t.editData.tishi_desc,t.goodsData.shipping_desc=t.editData.shipping_desc,t.goodsData.cat_id=t.editData.cat_id,t.desc=t.editData.descpt,t.XcphotoData=e.data.data.goods_img,t.editAttrForm.cat_id=e.data.data.goods_info.cat_id,t.originalCatId=e.data.data.goods_info.cat_id,t.editAttrForm.original_cat_id=e.data.data.goods_info.original_cat_id,t.editData=e.data.data.goods_info,t.goods_attr=e.data.data.goods_attr,t.getAttrLists(),t.goods_attr=e.data.data.goods_attr,t.isReady=!0,t.goodsData.descpt=t.editData.descpt)})},getOptions:function(){var t=JSON.parse(sessionStorage.getItem("data"));this.categoryOptions=t.data.argument.category,this.vs_idOptions=t.data.argument.vip_setting,this.vs_idOptions.unshift({label:"普通商品",value:0})},getAttrLists:function(){var t=this;0==this.editAttrForm.cat_id?this.attrLists=[]:(this.fileIdArr=[],ya({cat_id:this.editAttrForm.cat_id}).then(function(e){if(200==e.data.code){if(e.data.data.length>0){var a=e.data.data,i=[],r=!1;for(var o in a){for(var s in t.goods_attr)a[o].attr_id==t.goods_attr[s].attr_id&&(i.push(n()({},a[o],t.goods_attr[s])),r=!0);r||i.push(a[o]),r=!1}var l=i[0].attr_id;i.forEach(function(t,e){t.values=t.attr_values.split("\n"),null!=t.img_url&&(t.img_url=t.img_url),t.attrValues=t.attr_value,t.showFile="",0==e?(t.isFirst=!0,t.attrList=[]):(t.attr_id==l?t.isFirst=!1:(t.isFirst=!0,t.attrList=[]),l=t.attr_id)}),t.attrLists=i}else t.attrLists=e.data.data;if(t.isReset){t.isReset=!t.isReset;for(var d=0;d<t.attrLists.length;d++)if(null!=document.getElementById("upload"+d)){var c=document.getElementById("upload"+d);c.outerHTML=c.outerHTML}}}}))},handleSupplier:function(t){2==t.length&&(this.goodsData.category=t[t.length-1])},edit:function(t,e){var a=!1,i=!1;if(this.$refs.goodsData.validate(function(t){t&&(a=!0)}),this.$refs.editAttrForm.validate(function(t){t&&(i=!0)}),a&&i)console.log("通过"),this.editSubmit(t,e);else if("first"==this.activeName||"second"==this.activeName||"third"==this.activeName||"forth"==this.activeName)if(a)i||(this.activeName="third");else switch("second"!=this.activeName&&"third"!=this.activeName||(this.activeName="first"),"forth"==this.activeName&&(this.photoVisible=!1,this.photoEditVisible=!1,this.activeName="first"),!0){case""==this.goodsData.name:this.$refs.name.scrollIntoView(!1);break;case""==this.goodsData.weight:this.$refs.weight.scrollIntoView(!1);break;case""==this.goodsData.ord:this.$refs.ord.scrollIntoView(!1);break;case""==this.goodsData.category:this.$refs.category.scrollIntoView(!1);break;case""==this.goodsData.price:this.$refs.price.scrollIntoView(!1)}else if(i){if(!a)switch(this.activeName="first",!0){case""==this.goodsData.name:this.$refs.name.scrollIntoView(!1);break;case""==this.goodsData.weight:this.$refs.weight.scrollIntoView(!1);break;case""==this.goodsData.ord:this.$refs.ord.scrollIntoView(!1);break;case""==this.goodsData.category:this.$refs.category.scrollIntoView(!1);break;case""==this.goodsData.price:this.$refs.price.scrollIntoView(!1)}}else;},editSubmit:function(t,e){var a={};a.id=this.$route.query.id,a.price=this.goodsData.price,a.ord=this.goodsData.ord,a.weight=this.goodsData.weight,a.category=this.goodsData.category,a.vs_id=this.goodsData.vs_id,a.is_sale=this.goodsData.is_sale,a.is_fei5zhe=this.goodsData.is_fei5zhe,a.is_limit=0,a.tishi_desc=this.goodsData.tishi_desc,a.shipping_desc=this.goodsData.shipping_desc,a.name=this.goodsData.name,a.regions=this.goodsData.regions,a.descpt=this.desc,a.cat_id=this.editAttrForm.cat_id,a.original_cat_id=this.originalCatId;var i=[];for(var r in this.attrLists){var o={};if(this.attrLists[r].attr_id?o.attr_id=this.attrLists[r].attr_id:o.attr_id="",this.attrLists[r].attrValues?o.attr_value=this.attrLists[r].attrValues:o.attr_value="",this.attrLists[r].goods_attr_id?o.goods_attr_id=this.attrLists[r].goods_attr_id:o.goods_attr_id="",this.attrLists[r].img_id?o.img_id=this.attrLists[r].img_id:o.img_id="",this.attrLists[r].attr_img?o.img_url=this.attrLists[r].attr_img:null!=this.attrLists[r].img_url?o.img_url=this.attrLists[r].img_url:o.img_url="",void 0!=this.attrLists[r].attrValues&&i.push(o),this.attrLists[r].attrList&&0!=this.attrLists[r].attrList.length)for(var s in this.attrLists[r].attrList){var n={};this.attrLists[r].attrList[s].attr_id?n.attr_id=this.attrLists[r].attrList[s].attr_id:n.attr_id="",this.attrLists[r].attrList[s].attrValue?n.attr_value=this.attrLists[r].attrList[s].attrValue:n.attr_value="",this.attrLists[r].attrList[s].goods_attr_id?n.goods_attr_id=this.attrLists[r].attrList[s].goods_attr_id:n.goods_attr_id="",this.attrLists[r].attrList[s].img_id?n.img_id=this.attrLists[r].attrList[s].img_id:n.img_id="",this.attrLists[r].attrList[s].attr_img?n.img_url=this.attrLists[r].attrList[s].attr_img:null!=this.attrLists[r].attrList[s].img_url?n.img_url=this.attrLists[r].attrList[s].img_url:n.img_url="",""!=this.attrLists[r].attrList[s].attrValue&&i.push(n)}}if(a.attr=w()(i),t)if(a.flag=t,"add"==t){a.is_show=this.addphotoForm.is_show,a.sort=this.addphotoForm.sort,a.img_desc=this.addphotoForm.img_desc;var l=new FormData;for(var d in a)"album"!=d&&l.append(d,a[d]);for(var s in this.fileListImg)l.append("album[]",this.fileListImg[s].raw);this.editApi(l,"add")}else"edit"==t?(a.is_show=this.editphotoForm.is_show,a.img_id=this.editphotoForm.img_id,a.sort=this.editphotoForm.sort,this.editApi(a,"edit")):(a.img_id=e.img_id,this.editApi(a,"delete"));else this.editApi(a)},editApi:function(t,e){var a=this;if("object"==G()(this.goodsData.img)){var i=new FormData;i.append("img",this.goodsData.img),qe(i).then(function(i){200==i.data.code&&("add"==e?t.append("img",i.data.data.img_url):t.img=i.data.data.img_url,ga(t).then(function(t){200==t.code?(a.getGoodEditList(),a.$router.go(-1),a.$message({message:t.msg,type:"success"})):a.$message({message:t.msg,type:"warning"})}))})}else"add"==e?t.append("img",this.goodsData.img):t.img=this.goodsData.img,ga(t).then(function(t){200==t.code?(a.getGoodEditList(),e||a.$router.go(-1),"add"==e?(a.photoVisible=!1,a.$refs.addphotoForm.resetFields(),a.fileListImg=[]):"edit"==e&&(a.photoEditVisible=!1),a.$message({message:t.msg,type:"success"})):a.$message({message:t.msg,type:"warning"})})},updateData:function(t){this.desc=t,console.log(t)},handleAddphoto:function(){this.photoVisible=!0},changeUploadImg:function(t,e){this.fileListImg=e},handleEditPhoto:function(t){this.photoEditVisible=!0,this.editphotoForm.img_id=t.img_id,this.editphotoForm.is_show=t.is_show,this.$set(this.editphotoForm,"sort",t.sort)},changeAttrValue:function(t){this.$set(this.attrLists,t,this.attrLists[t])},getGoodType:function(){var t=this;oa().then(function(e){200==e.data.code&&(t.typeOptions=e.data.data.list)})},addAttr:function(t,e){t.attrList,t.img_url,t.img_id,t.attr_value,t.goods_attr_id;var a=q()(t,["attrList","img_url","img_id","attr_value","goods_attr_id"]);this.attrLists[e].attrList.push(a),this.$set(this.attrLists,e,this.attrLists[e])},decreaseAttr:function(t,e,a){1==t?this.attrLists.splice(e,1):(this.attrLists[e].attrList.splice(a,1),this.$set(this.attrLists,e,this.attrLists[e]))},changeImg:function(t,e,a){var i=this,r=e.target.files[0],o=new FormData;o.append("img",r),qe(o).then(function(r){200==r.data.code?null!=a?i.attrLists[t].attrList[a].attr_img=r.data.data.img_url:(i.attrLists[t].attr_img=r.data.data.img_url,i.attrLists[t].showFile=e.target.files[0].name):i.$message({message:r.data.msg,type:"warning"})})},change:function(t){this.$set(this.form,t,this.form[t])},reset:function(){this.getOptions(),this.getGoodEditList(),this.getSupplier(),this.isReset=!0}},mounted:function(){this.getOptions(),this.getGoodEditList(),this.getGoodType()},watch:{attrLists:{handler:function(t,e){this.form=t}}}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本管理",name:"first"}},[a("div",{staticStyle:{width:"640px"}},[a("el-form",{ref:"goodsData",attrs:{model:t.goodsData,"label-width":"200px",rules:t.rules}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("div",{ref:"name"},[a("el-input",{staticStyle:{"font-size":"15px"},attrs:{placeholder:"请输入商品名称"},model:{value:t.goodsData.name,callback:function(e){t.$set(t.goodsData,"name",e)},expression:"goodsData.name"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"商品图片",prop:"img"}},[a("VueImgInputer",{attrs:{theme:"light",imgSrc:t.goodsData.img},model:{value:t.goodsData.img,callback:function(e){t.$set(t.goodsData,"img",e)},expression:"goodsData.img"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"重量(千克)",prop:"weight"}},[a("div",{ref:"weight"},[a("el-input",{attrs:{placeholder:"请输入重量"},model:{value:t.goodsData.weight,callback:function(e){t.$set(t.goodsData,"weight",e)},expression:"goodsData.weight"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"ord"}},[a("div",{ref:"ord"},[a("el-input-number",{attrs:{min:1,placeholder:"请输入排序"},model:{value:t.goodsData.ord,callback:function(e){t.$set(t.goodsData,"ord",e)},expression:"goodsData.ord"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"商品分类",prop:"category"}},[a("el-cascader",{attrs:{options:t.categoryOptions,props:t.props},on:{change:t.handleSupplier},model:{value:t.goodsData.category,callback:function(e){t.$set(t.goodsData,"category",e)},expression:"goodsData.category"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"会员商品",prop:"vs_id"}},[a("div",{ref:"vs_id"},[a("el-select",{attrs:{placeholder:"请选择供应商"},model:{value:t.goodsData.vs_id,callback:function(e){t.$set(t.goodsData,"vs_id",e)},expression:"goodsData.vs_id"}},t._l(t.vs_idOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("el-form-item",{attrs:{label:"售价",prop:"price"}},[a("div",{ref:"price"},[a("el-input",{attrs:{placeholder:"请选择售价"},model:{value:t.goodsData.price,callback:function(e){t.$set(t.goodsData,"price",e)},expression:"goodsData.price"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"商品状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.goodsData.is_sale,callback:function(e){t.$set(t.goodsData,"is_sale",e)},expression:"goodsData.is_sale"}},t._l(t.goodsState,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"配送范围",prop:"shipping_desc"}},[a("el-input",{attrs:{placeholder:"请输入配送范围"},model:{value:t.goodsData.shipping_desc,callback:function(e){t.$set(t.goodsData,"shipping_desc",e)},expression:"goodsData.shipping_desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"温馨提示",prop:"tishi_desc"}},[a("el-input",{attrs:{placeholder:"请输入温馨提示"},model:{value:t.goodsData.tishi_desc,callback:function(e){t.$set(t.goodsData,"tishi_desc",e)},expression:"goodsData.tishi_desc"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.edit()}}},[t._v("确定")])],1)],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"图文详情管理",name:"second"}},[a("div",{staticClass:"goods-yulan",staticStyle:{width:"375px",margin:"0 auto"}},[a("vue-html5-editor",{attrs:{content:t.desc,id:"desc"},on:{change:t.updateData}}),t._v(" "),a("div",{staticStyle:{"text-align":"center","padding-top":"20px"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.edit()}}},[t._v("确定")])],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"相册管理",name:"forth"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddphoto}},[t._v("新增")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.XcphotoData,border:""}},[a("el-table-column",{attrs:{prop:"img_url",label:"图片",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"100px"},attrs:{src:t.row.img_url,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"img_desc",label:"描述",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_show",label:"是否显示"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.is_show?a("p",[t._v("否")]):t._e(),t._v(" "),1==e.row.is_show?a("p",[t._v("是")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"290"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.handleEditPhoto(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.edit("delete",e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增相册",visible:t.photoVisible,width:"30%"},on:{"update:visible":function(e){t.photoVisible=e}}},[a("el-form",{ref:"addphotoForm",attrs:{model:t.addphotoForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"描述",prop:"img_desc"}},[a("el-input",{model:{value:t.addphotoForm.img_desc,callback:function(e){t.$set(t.addphotoForm,"img_desc",e)},expression:"addphotoForm.img_desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"is_show"}},[a("el-upload",{attrs:{action:"","auto-upload":!1,"list-type":"picture-card",multiple:"",limit:9,"file-list":t.fileListImg,"on-change":t.changeUploadImg}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input-number",{attrs:{min:1},model:{value:t.addphotoForm.sort,callback:function(e){t.$set(t.addphotoForm,"sort",e)},expression:"addphotoForm.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"显示",prop:"is_show"}},[a("el-radio-group",{model:{value:t.addphotoForm.is_show,callback:function(e){t.$set(t.addphotoForm,"is_show",e)},expression:"addphotoForm.is_show"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.photoVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.edit("add")}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑相册",visible:t.photoEditVisible,width:"30%"},on:{"update:visible":function(e){t.photoEditVisible=e}}},[a("el-form",{ref:"editphotoForm",attrs:{model:t.editphotoForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input-number",{attrs:{min:1},model:{value:t.editphotoForm.sort,callback:function(e){t.$set(t.editphotoForm,"sort",e)},expression:"editphotoForm.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"显示",prop:"is_show"}},[a("el-radio-group",{model:{value:t.editphotoForm.is_show,callback:function(e){t.$set(t.editphotoForm,"is_show",e)},expression:"editphotoForm.is_show"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.photoEditVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.edit("edit")}}},[t._v("提交")])],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"属性管理",name:"fifth"}},[a("div",[a("el-form",{ref:"editAttrForm",attrs:{"label-width":"150px",model:t.editAttrForm,rule:t.formRules}},[a("el-form-item",{attrs:{label:"商品类型"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getAttrLists},model:{value:t.editAttrForm.cat_id,callback:function(e){t.$set(t.editAttrForm,"cat_id",e)},expression:"editAttrForm.cat_id"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),t._l(t.attrLists,function(e,i){return a("div",{key:i,staticClass:"mb15"},[a("tr",[a("td",{staticClass:"label"},[1==e.attr_type&&e.isFirst?a("i",{staticClass:"el-icon-plus",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.addAttr(e,i)}}}):t._e(),t._v(" "),1!=e.attr_type||e.isFirst?t._e():a("i",{staticClass:"el-icon-minus",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.decreaseAttr(1,i)}}}),t._v("\n              "+t._s(e.attr_name)+"\n            ")]),t._v(" "),a("td",{staticClass:"color-gray"},[""!=e.attr_values?a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",clearable:"",placeholder:"请选择"},on:{change:function(e){return t.changeAttrValue(i)}},model:{value:e.attrValues,callback:function(a){t.$set(e,"attrValues",a)},expression:"item.attrValues"}},t._l(e.values,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1):t._e(),t._v(" "),""==e.attr_values?a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.attrValues,callback:function(a){t.$set(e,"attrValues",a)},expression:"item.attrValues"}}):t._e()],1),t._v(" "),null!=e.img_url?a("td",[a("img",{staticStyle:{width:"40px",height:"40px",padding:"0 10px","margin-bottom":"-10px"},attrs:{src:e.img_url,alt:""}})]):t._e(),t._v(" "),1==e.attr_type?a("td",[a("input",{attrs:{id:"upload"+i,type:"file"},on:{change:function(e){return t.changeImg(i,e)}}})]):t._e()]),t._v(" "),t._l(e.attrList,function(e,r){return a("div",{key:r,staticClass:"mt15"},[a("tr",[a("td",{staticClass:"label"},[1==e.attr_type?a("i",{staticClass:"el-icon-minus",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.decreaseAttr(2,i,r)}}}):t._e(),t._v(t._s(e.attr_name)+"\n              ")]),t._v(" "),a("td",{staticClass:"color-gray"},[""!=e.attr_values?a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},on:{change:function(e){return t.change(i)}},model:{value:t.form[i].attrList[r].attrValue,callback:function(e){t.$set(t.form[i].attrList[r],"attrValue",e)},expression:"form[index].attrList[idx].attrValue"}},t._l(e.values,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1):t._e(),t._v(" "),""==e.attr_values?a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form[i].attrList[r].attrValue,callback:function(e){t.$set(t.form[i].attrList[r],"attrValue",e)},expression:"form[index].attrList[idx].attrValue"}}):t._e()],1),t._v(" "),1==e.attr_type?a("td",[a("input",{attrs:{id:i+"upload"+r,type:"file"},on:{change:function(e){return t.changeImg(i,e,r)}}})]):t._e()])])})],2)}),t._v(" "),a("div",{staticStyle:{"text-align":"center","padding-top":"20px"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.edit()}}},[t._v("确定")])],1)],2)],1)])],1)],1)},staticRenderFns:[]};var Z=a("VU/8")(K,X,!1,function(t){a("G2ar")},"data-v-7705fcdb",null).exports,Q={name:"goods-add",data:function(){return{tabName:"first",addForm:{name:"",weight:"",ord:"",category:"",vs_id:0,price:"",sale:!0,is_sale:"",album:"",mprice:!1,shipping_desc:"",tishi_desc:"",img:"",descpt:"",cat_id:"",attr:[],attr_img:[]},addThirdForm:{cat_id:""},typeOptions:[],form:[],attrLists:[],fileListImg:[],categoryOptions:[],vs_idOptions:[],category:[],props:{label:"cat_name",value:"cat_id",children:"child"},leafOnly:!0,rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],ord:[{required:!0,message:"请输入排序",trigger:"blur"}],category:[{required:!0,message:"请选择商品分类",trigger:"blur"}],price:[{required:!0,message:"请输入售价",trigger:"blur"}]},thirdRules:{cat_id:[{required:!0,message:"请选择商品属性",trigger:"blur"}]},config:{initialFrameHeight:500,scaleEnabled:!0,zIndex:"0"}}},methods:{getOptions:function(){var t=JSON.parse(sessionStorage.getItem("data"));this.categoryOptions=t.data.argument.category,this.vs_idOptions=t.data.argument.vip_setting,this.vs_idOptions.unshift({label:"普通商品",value:0})},handleSupplier:function(t){this.category.length>0&&(this.addForm.category=this.category[this.category.length-1])},changeUploadImg:function(t,e){this.fileListImg=e,this.addForm.img=e[0]},handleExceedImg:function(t,e){this.$message.warning("当前限制选择 9 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},changeImg:function(t,e,a){var i=this,r=e.target.files[0],o=new FormData;o.append("img",r),qe(o).then(function(e){200==e.data.code?null!=a?i.attrLists[t].attrList[a].attr_img=e.data.data.img_url:i.attrLists[t].attr_img=e.data.data.img_url:i.$message({message:e.data.msg,type:"warning"})})},addFormSubmit:function(){var t=this,e=!1,a=!1;if(this.$refs.addForm.validate(function(t){t&&(e=!0)}),this.$refs.addThirdForm.validate(function(t){t&&(a=!0)}),e&&a)this.$confirm("确认提交吗?","提示",{}).then(function(){t.addForm.sale?t.addForm.is_sale=0:t.addForm.is_sale=1,t.addForm.cat_id=t.addThirdForm.cat_id;var e=[];for(var a in t.attrLists)for(var i in t.attrLists[a].attrValue?e.push({attr_type:t.attrLists[a].attr_type,attr_id:t.attrLists[a].attr_id,attr_value:t.attrLists[a].attrValue,attr_img:t.attrLists[a].attr_img}):e.push({attr_type:t.attrLists[a].attr_type,attr_id:t.attrLists[a].attr_id,attr_value:"",attr_img:t.attrLists[a].attr_img}),t.attrLists[a].attrList)t.attrLists[a].attrList[i]?e.push({attr_type:t.attrLists[a].attrList[i].attr_type,attr_id:t.attrLists[a].attrList[i].attr_id,attr_value:t.attrLists[a].attrList[i].attrValues,attr_img:t.attrLists[a].attrList[i].attr_img}):e.push({attr_type:t.attrLists[a].attrList[i].attr_type,attr_id:t.attrLists[a].attrList[i].attr_id,attr_value:"",attr_img:t.attrLists[a].attrList[i].attr_img});t.addForm.attr=w()(e);var r=new FormData;for(var o in t.addForm)"img"==o||"album"==o||"descpt"==o||r.append(o,t.addForm[o]);if(r.append("descpt",t.addForm.descpt),t.fileListImg&&t.fileListImg.length>0){for(var a in t.fileListImg)0!=a&&r.append("album[]",t.fileListImg[a].raw);r.append("img",t.fileListImg[0].raw)}else r.append("img","");for(var s=0;s<t.attrLists.length;s++){document.getElementById("upload"+s)&&r.append("attr_img[]",document.getElementById("upload"+s).files[0]);for(var n=0;n<t.attrLists[s].attrList.length;n++)document.getElementById(s+"upload"+n).files[0]&&r.append("attr_img[]",document.getElementById(s+"upload"+n).files[0])}ba(r).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.$router.go(-1)):t.$message({message:e.msg,type:"warning"})})});else if("first"==this.tabName||"second"==this.tabName)if(e)a||(this.tabName="third");else switch("second"==this.tabName&&(this.tabName="first"),!0){case""==this.addForm.name:this.$refs.name.scrollIntoView(!1);break;case""==this.addForm.weight:this.$refs.weight.scrollIntoView(!1);break;case""==this.addForm.ord:this.$refs.ord.scrollIntoView(!1);break;case""==this.addForm.category:this.$refs.category.scrollIntoView(!1);break;case""==this.addForm.price:this.$refs.price.scrollIntoView(!1)}else if(a){if(!e)switch(this.tabName="first",!0){case""==this.addForm.name:this.$refs.name.scrollIntoView(!1);break;case""==this.addForm.weight:this.$refs.weight.scrollIntoView(!1);break;case""==this.addForm.ord:this.$refs.ord.scrollIntoView(!1);break;case""==this.addForm.category:this.$refs.category.scrollIntoView(!1);break;case""==this.addForm.price:this.$refs.price.scrollIntoView(!1)}}else;},updateData:function(t){this.addForm.descpt=t},getAttrLists:function(){var t=this;0==this.addThirdForm.cat_id?this.attrLists=[]:ya({cat_id:this.addThirdForm.cat_id}).then(function(e){200==e.data.code&&(t.attrLists=e.data.data,t.attrLists.forEach(function(e,a){t.attrLists[a].values=e.attr_values.split("\n"),t.$set(t.attrLists[a],"attrValue",""),t.attrLists[a].attrList=[]}))})},getGoodType:function(){var t=this;oa().then(function(e){200==e.data.code&&(t.typeOptions=e.data.data.list)})},addAttr:function(t,e){t.attrList;var a=q()(t,["attrList"]);a.attrValues="",this.attrLists[e].attrList.push(a),this.$set(this.attrLists,e,this.attrLists[e])},decreaseAttr:function(t,e){this.attrLists[t].attrList.splice(e,1),this.$set(this.attrLists,t,this.attrLists[t])},change:function(t){this.$set(this.form,t,this.form[t])},goBack:function(){this.$router.go(-1)},reset:function(){this.$refs.addForm.resetFields(),this.category=[],this.fileListImg=[],this.attrLists=[],this.addThirdForm.cat_id=""}},mounted:function(){this.getOptions(),this.getGoodType()},watch:{attrLists:{handler:function(t,e){this.form=t}}}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"warning",icon:"el-icon-back"},on:{click:function(e){return t.goBack()}}},[t._v("返回")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addFormSubmit}},[t._v("立即提交")])],1),t._v(" "),a("el-form-item",[a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"border-card"},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:"通用详情",name:"first"}},[a("div",{staticStyle:{width:"640px"}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"200px",rules:t.rules}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("div",{ref:"name"},[a("el-input",{staticStyle:{"font-size":"15px"},attrs:{width:"50"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"重量(千克)",prop:"weight"}},[a("div",{ref:"weight"},[a("el-input",{model:{value:t.addForm.weight,callback:function(e){t.$set(t.addForm,"weight",e)},expression:"addForm.weight"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"ord"}},[a("el-input-number",{attrs:{min:1},model:{value:t.addForm.ord,callback:function(e){t.$set(t.addForm,"ord",e)},expression:"addForm.ord"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品分类",prop:"category"}},[a("div",{ref:"category"},[a("el-cascader",{attrs:{options:t.categoryOptions,clearable:"",props:t.props},on:{change:t.handleSupplier},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"会员商品",prop:"vs_id"}},[a("div",{ref:"vs_id"},[a("el-select",{attrs:{placeholder:"请选择供应商"},model:{value:t.addForm.vs_id,callback:function(e){t.$set(t.addForm,"vs_id",e)},expression:"addForm.vs_id"}},t._l(t.vs_idOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("el-form-item",{attrs:{label:"售价",prop:"price"}},[a("div",{ref:"price"},[a("el-input",{model:{value:t.addForm.price,callback:function(e){t.$set(t.addForm,"price",e)},expression:"addForm.price"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"是否上架",prop:"sale"}},[a("el-checkbox",{model:{value:t.addForm.sale,callback:function(e){t.$set(t.addForm,"sale",e)},expression:"addForm.sale"}},[t._v("打钩表示商品上架")])],1),t._v(" "),a("el-form-item",{attrs:{label:"配送范围",prop:"shipping_desc"}},[a("el-input",{model:{value:t.addForm.shipping_desc,callback:function(e){t.$set(t.addForm,"shipping_desc",e)},expression:"addForm.shipping_desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"温馨提示",prop:"tishi_desc"}},[a("el-input",{model:{value:t.addForm.tishi_desc,callback:function(e){t.$set(t.addForm,"tishi_desc",e)},expression:"addForm.tishi_desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片(默认第一张为商品主图)",prop:"img"}},[a("el-upload",{attrs:{action:"","auto-upload":!1,"list-type":"picture-card",multiple:"",limit:9,"file-list":t.fileListImg,"on-change":t.changeUploadImg,"on-exceed":t.handleExceedImg}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"详情",name:"second"}},[a("div",{staticStyle:{width:"1000px",margin:"0 auto"}},[a("vue-html5-editor",{attrs:{content:t.addForm.descpt,id:"asked_question"},on:{change:t.updateData}})],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"商品属性",name:"third"}},[a("el-form",{ref:"addThirdForm",attrs:{"label-width":"150px",model:t.addThirdForm,rules:t.thirdRules}},[a("el-form-item",{attrs:{label:"商品类型",prop:"cat_id"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getAttrLists},model:{value:t.addThirdForm.cat_id,callback:function(e){t.$set(t.addThirdForm,"cat_id",e)},expression:"addThirdForm.cat_id"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),t._l(t.attrLists,function(e,i){return a("div",{key:i,staticClass:"mb15"},[a("tr",[a("td",{staticClass:"label"},[1==e.attr_type?a("i",{staticClass:"el-icon-plus",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.addAttr(e,i)}}}):t._e(),t._v("\n              "+t._s(e.attr_name)+"\n            ")]),t._v(" "),a("td",{staticClass:"color-gray"},[""!=e.attr_values?a("el-select",{attrs:{filterable:"","allow-create":"",clearable:"",placeholder:"请选择"},model:{value:e.attrValue,callback:function(a){t.$set(e,"attrValue",a)},expression:"item.attrValue"}},t._l(e.values,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1):t._e(),t._v(" "),""==e.attr_values?a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.attrValue,callback:function(a){t.$set(e,"attrValue",a)},expression:"item.attrValue"}}):t._e()],1),t._v(" "),1==e.attr_type?a("td",[a("input",{staticClass:"file",attrs:{id:"upload"+i,type:"file",name:"file"},on:{change:function(e){return t.changeImg(i,e)}}})]):t._e()]),t._v(" "),t._l(e.attrList,function(e,r){return a("div",{key:r,staticClass:"mt15"},[a("tr",[a("td",{staticClass:"label"},[1==e.attr_type?a("i",{staticClass:"el-icon-minus",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.decreaseAttr(i,r)}}}):t._e(),t._v("\n                "+t._s(e.attr_name)+"\n              ")]),t._v(" "),a("td",{staticClass:"color-gray"},[""!=e.attr_values?a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",clearable:"",placeholder:"请选择"},on:{change:function(e){return t.change(i)}},model:{value:t.form[i].attrList[r].attrValues,callback:function(e){t.$set(t.form[i].attrList[r],"attrValues",e)},expression:"form[index].attrList[idx].attrValues"}},t._l(e.values,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1):t._e(),t._v(" "),""==e.attr_values?a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:t.form[i].attrList[r].attrValues,callback:function(e){t.$set(t.form[i].attrList[r],"attrValues",e)},expression:"form[index].attrList[idx].attrValues"}}):t._e()],1),t._v(" "),1==e.attr_type?a("td",[a("input",{staticClass:"file",attrs:{id:i+"upload"+r,type:"file"},on:{change:function(e){return t.changeImg(i,e,r)}}})]):t._e()])])})],2)})],2)],1)],1)],1)},staticRenderFns:[]};var tt=a("VU/8")(Q,W,!1,function(t){a("zHf6")},"data-v-cae9c350",null).exports,et={name:"goods-spot",data:function(){return{id:"",list:[],attrLists:[],tableData:[],editFormVisible:!1,editForm:{},isMultiple:!1,form:[],attrTable:[],products:{product_sn:1,stock:"",price:"",weight:""},attr:[]}},methods:{getData:function(){var t=this;Fa({goods_id:this.id}).then(function(e){if(200==e.data.code)if(t.isMultiple){var a=e.data.data.product_list;a.forEach(function(e,a){var i=[];for(var r in t.attrLists)for(var o in e.goods_attr){if(t.attrLists[r].attr_name==e.goods_attr[o].attr){i.push(e.goods_attr[o].value);break}o==e.goods_attr.length-1&&i.push("")}e.attr=i}),t.tableData=a}else t.tableData=e.data.data.goods})},getAttr:function(){var t=this;ka({goods_id:this.id}).then(function(e){if(200==e.data.code){for(var a in t.attrLists=[],e.data.data)1==e.data.data[a].attr_type&&t.attrLists.push({attr_id:e.data.data[a].attr_id,attr_name:e.data.data[a].attr_name,attr_values:e.data.data[a].attr_values,attr_type:e.data.data[a].attr_type,value:""});t.list=t.attrLists,t.attrLists.forEach(function(e){1==e.attr_type&&(t.isMultiple=!0)}),t.getData()}})},addAttr:function(){this.attrTable.push({product_sn:1,stock:"",price:"",weight:"",attrList:this.list}),this.form=JSON.parse(w()(this.attrTable))},handleAdd:function(){var t=this;this.$confirm("确认提交吗？","提示",{}).then(function(){var e={goods_id:t.id,products:[]};t.products.attr_id=t.attr,t.attr.length<t.attrLists.length&&t.attr.push("");for(var a=0;a<t.attr.length;a++)void 0===t.attr[a]&&(t.attr[a]="");e.products.push(t.products),t.form.forEach(function(t,a){var i=[];t.attrList.forEach(function(t,e){i.push(t.value)}),e.products.push({attr_id:i,product_sn:t.product_sn,stock:t.stock,price:t.price,weight:t.weight})}),wa(e).then(function(e){200==e.data.code?(t.$message({message:e.data.msg,type:"success"}),t.getData(),t.$router.go(-1)):t.$message({message:e.data.msg,type:"warning"})})})},handleEdit:function(t){this.editFormVisible=!0,this.editForm=t},editSubmit:function(){var t=this;this.$confirm("确认提交吗？","提示",{}).then(function(){t.editForm.number=t.editForm.stock,xa(t.editForm).then(function(e){200==e.data.code?(t.$message({message:e.data.msg,type:"success"}),t.getData(),t.editFormVisible=!1):t.$message({message:e.data.msg,type:"warning"})})})},delAttr:function(t){var e=this;this.$confirm("确认删除吗？","提示",{}).then(function(){e.attrTable.splice(t,1),e.form=JSON.parse(w()(e.attrTable))})},handleDel:function(t){var e=this;this.$confirm("确认删除吗？","提示",{}).then(function(){$a({product_id:t.product_id}).then(function(t){200==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.getData()):e.$message({message:t.data.msg,type:"warning"})})})},goBack:function(){this.$router.go(-1)}},created:function(){this.id=this.$route.params.id,this.getAttr()},watch:{form:{deep:!0,handler:function(t,e){this.attrTable=JSON.parse(w()(this.form))}}}},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"warning",icon:"el-icon-back"},on:{click:function(e){return t.goBack()}}},[t._v("返回")])],1)],1)],1)],1),t._v(" "),a("table",{staticStyle:{width:"100%"},attrs:{id:"parent"}},[a("tr",[t._l(t.attrLists,function(e){return t.isMultiple?a("td",[t._v(t._s(e.attr_name))]):t._e()}),t._v(" "),a("td",[t._v("库存")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:t.isMultiple,expression:"isMultiple"}]},[t._v("价格")]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:t.isMultiple,expression:"isMultiple"}]},[t._v("重量")]),t._v(" "),a("td",{staticStyle:{width:"110px"}},[t._v("操作")])],2),t._v(" "),t._l(t.tableData,function(e){return a("tr",[t._l(e.attr,function(e){return t.isMultiple?a("td",[t._v(t._s(e))]):t._e()}),t._v(" "),a("td",[t._v(t._s(e.stock))]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:t.isMultiple,expression:"isMultiple"}]},[t._v(t._s(e.price))]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:t.isMultiple,expression:"isMultiple"}]},[t._v(t._s(e.weight))]),t._v(" "),a("td",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isMultiple,expression:"isMultiple"}],staticStyle:{float:"left"},on:{click:function(a){return t.handleDel(e)}}},[t._v("-")]),t._v(" "),a("el-button",{staticStyle:{float:"left"},on:{click:function(a){return t.handleEdit(e)}}},[t._v("编辑")])],1)],2)}),t._v(" "),t._l(t.attrTable,function(e,i){return a("tr",{key:i},[t._l(e.attrList,function(e,r){return a("td",{key:r},[a("el-select",{attrs:{"value-key":"id",placeholder:"请选择"},model:{value:t.form[i].attrList[r].value,callback:function(e){t.$set(t.form[i].attrList[r],"value",e)},expression:"form[index].attrList[idx].value"}},t._l(e.attr_values,function(t){return a("el-option",{key:Math.random(),attrs:{label:t.value,value:t.id}})}),1)],1)}),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form[i].stock,expression:"form[index].stock"}],attrs:{type:"text"},domProps:{value:t.form[i].stock},on:{input:function(e){e.target.composing||t.$set(t.form[i],"stock",e.target.value)}}})]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form[i].price,expression:"form[index].price"}],attrs:{type:"text"},domProps:{value:t.form[i].price},on:{input:function(e){e.target.composing||t.$set(t.form[i],"price",e.target.value)}}})]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form[i].weight,expression:"form[index].weight"}],attrs:{type:"text"},domProps:{value:t.form[i].weight},on:{input:function(e){e.target.composing||t.$set(t.form[i],"weight",e.target.value)}}})]),t._v(" "),a("td",[a("el-button",{staticStyle:{float:"left"},on:{click:function(e){return t.delAttr(i)}}},[t._v("-")])],1)],2)}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.isMultiple,expression:"isMultiple"}]},[t._l(t.attrLists,function(e,i){return 1==e.attr_type?a("td",{key:i},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.attr[i],callback:function(e){t.$set(t.attr,i,e)},expression:"attr[i]"}},t._l(e.attr_values,function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}),1)],1):t._e()}),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.products.stock,expression:"products.stock"}],attrs:{type:"text"},domProps:{value:t.products.stock},on:{input:function(e){e.target.composing||t.$set(t.products,"stock",e.target.value)}}})]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.products.price,expression:"products.price"}],attrs:{type:"text"},domProps:{value:t.products.price},on:{input:function(e){e.target.composing||t.$set(t.products,"price",e.target.value)}}})]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.products.weight,expression:"products.weight"}],attrs:{type:"text"},domProps:{value:t.products.weight},on:{input:function(e){e.target.composing||t.$set(t.products,"weight",e.target.value)}}})]),t._v(" "),a("td",[a("el-button",{staticStyle:{float:"left"},on:{click:t.addAttr}},[t._v("+")])],1)],2)],2),t._v(" "),a("div",{staticStyle:{"text-align":"center","padding-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("确 定")])],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"库存",prop:"stock"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.stock,callback:function(e){t.$set(t.editForm,"stock",e)},expression:"editForm.stock"}})],1),t._v(" "),t.isMultiple?a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.price,callback:function(e){t.$set(t.editForm,"price",e)},expression:"editForm.price"}})],1):t._e(),t._v(" "),t.isMultiple?a("el-form-item",{attrs:{label:"重量",prop:"weight"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.weight,callback:function(e){t.$set(t.editForm,"weight",e)},expression:"editForm.weight"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var it=a("VU/8")(et,at,!1,function(t){a("e/my")},"data-v-d9264254",null).exports,rt={data:function(){return{goodsattrdata:[],tableloading:!0,page:1,pagecount:1,goods_type:"",fatheroptions:[{value:0,label:"------------请选择-----------"}],addFormVisible:!1,addForm:{attr_name:"",goodstype_id:"",attr_group:"",attr_values:"",attr_index:"",is_linked:0,attr_type:1,attr_input_type:0},editFormVisible:!1,editForm:{attr_id:"",attr_name:"",goodstype_id:"",attr_group:"",attr_values:"",attr_index:"",is_linked:0,attr_type:1,attr_input_type:0},inpdisabled:!0,dialogoptions:[],dialogsonoptions:[],batcharr:[]}},methods:{getgoodsattr:function(){var t=this;this.tableloading=!0,na({goods_type:this.goods_type,page:this.page}).then(function(e){t.tableloading=!1,t.pagecount=e.data.data.pagecount,t.goodsattrdata=e.data.data.item})},handleselect:function(){this.getgoodsattr()},handleslecttable:function(t){var e=this;this.batcharr=[],t.forEach(function(t){e.batcharr.push(t.attr_id)})},handleCurrentChange:function(t){this.page=t,this.getgoodsattr()},dialogselect:function(t,e){var a=this;this.dialogsonoptions=[],sa({cat_id:t}).then(function(t){for(var i in t.data.data.grouplist){var r={label:t.data.data.grouplist[i],value:i};a.dialogsonoptions.push(r)}a.addForm.attr_group="0",null==e&&void 0==e||(console.log(e),a.editForm.attr_group=e+"")})},attr_input_typeformatter:function(t){return 0==t.attr_input_type?"手工录入":1==t.attr_input_type?"从下面的列表中选择":2==t.attr_input_type?"多行文本框":void 0},inputdisabled:function(t){this.inpdisabled=1!=t},handleAdd:function(){this.addFormVisible=!0,this.dialogoptions=this.fatheroptions},addSubmit:function(){var t=this,e=this;this.$confirm("确认提交吗？","提示",{}).then(function(){la(t.addForm).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.addFormVisible=!1,e.getgoodsattr()):e.$message({message:t.msg,type:"warning"})})})},handleEdit:function(t){this.editFormVisible=!0,this.dialogoptions=this.fatheroptions,this.editForm.attr_name=t.attr_name,this.editForm.goodstype_id=t.cat_id,this.editForm.attr_id=t.attr_id,this.editForm.attr_values=t.attr_values,this.editForm.attr_index=t.attr_index,this.editForm.is_linked=t.is_linked,this.editForm.attr_type=t.attr_type,this.editForm.attr_input_type=t.attr_input_type,this.dialogselect(this.editForm.goodstype_id,t.attr_group),this.inputdisabled(this.editForm.attr_input_type)},editSubmit:function(){var t=this,e=this;this.$confirm("确认提交吗？","提示",{}).then(function(){da(t.editForm).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.editFormVisible=!1,e.getgoodsattr()):e.$message({message:t.msg,type:"warning"})})})},handleDel:function(t){var e=this;this.$confirm("确认提交吗？","提示",{}).then(function(){ca({attr_id:t.attr_id}).then(function(t){200==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.getgoodsattr()):e.$message({message:t.data.msg,type:"warning"})})})},batchDelete:function(){var t=this,e=this;this.$confirm("确认删除"+this.batcharr.length+"项吗？","提示",{}).then(function(){ca({attr_id:t.batcharr}).then(function(t){200==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.getgoodsattr()):e.$message({message:t.data.msg,type:"warning"})})})}},mounted:function(){var t=this,e=this;oa().then(function(a){for(var i in a.data.data.list)t.fatheroptions.push(a.data.data.list[i]),void 0!=t.$route.params.id?t.goods_type=t.$route.params.id:t.goods_type=0;e.getgoodsattr()})},watch:{addFormVisible:function(t){t||this.$refs.addForm.resetFields()},editFormVisible:function(t){t||this.$refs.editForm.resetFields()}}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",{staticStyle:{float:"left","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),a("div",{staticStyle:{float:"left","margin-left":"20px"}},[t._v("\n          按商品类型显示：\n          "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleselect},model:{value:t.goods_type,callback:function(e){t.goods_type=e},expression:"goods_type"}},t._l(t.fatheroptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticStyle:{float:"left","margin-left":"20px"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.batchDelete}},[t._v("批量删除")])],1)])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.goodsattrdata,border:"","element-loading-text":"拼命加载中"},on:{"selection-change":t.handleslecttable}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attr_id",label:"编号",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attr_name",label:"属性名称",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cat_name",label:"商品类型",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attr_input_type",label:"属性值的录入方式",width:"140",formatter:t.attr_input_typeformatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"attr_values",label:"可选值列表"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-count":t.pagecount},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisible},on:{"update:visible":function(e){t.addFormVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"属性名称",prop:"attr_name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.attr_name,callback:function(e){t.$set(t.addForm,"attr_name",e)},expression:"addForm.attr_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属商品类型",prop:"goodstype_id"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.dialogselect(t.addForm.goodstype_id)}},model:{value:t.addForm.goodstype_id,callback:function(e){t.$set(t.addForm,"goodstype_id",e)},expression:"addForm.goodstype_id"}},t._l(t.dialogoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"该属性值的录入方式",prop:"attr_input_type"}},[a("el-radio-group",{on:{change:function(e){return t.inputdisabled(t.addForm.attr_input_type)}},model:{value:t.addForm.attr_input_type,callback:function(e){t.$set(t.addForm,"attr_input_type",e)},expression:"addForm.attr_input_type"}},[a("el-radio",{attrs:{label:0}},[t._v("手工录入")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("从下面的列表中选择（一行代表一个可选值）")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"可选值列表",prop:"attr_values"}},[a("el-input",{attrs:{type:"textarea",rows:3,disabled:t.inpdisabled},model:{value:t.addForm.attr_values,callback:function(e){t.$set(t.addForm,"attr_values",e)},expression:"addForm.attr_values"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"属性名称",prop:"attr_name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.attr_name,callback:function(e){t.$set(t.editForm,"attr_name",e)},expression:"editForm.attr_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属商品类型",prop:"goodstype_id"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.dialogselect(t.editForm.goodstype_id)}},model:{value:t.editForm.goodstype_id,callback:function(e){t.$set(t.editForm,"goodstype_id",e)},expression:"editForm.goodstype_id"}},t._l(t.dialogoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"该属性值的录入方式",prop:"attr_input_type"}},[a("el-radio-group",{on:{change:function(e){return t.inputdisabled(t.editForm.attr_input_type)}},model:{value:t.editForm.attr_input_type,callback:function(e){t.$set(t.editForm,"attr_input_type",e)},expression:"editForm.attr_input_type"}},[a("el-radio",{attrs:{label:0}},[t._v("手工录入")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("从下面的列表中选择（一行代表一个可选值）")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"可选值列表",prop:"attr_values"}},[a("el-input",{attrs:{type:"textarea",rows:3,disabled:t.inpdisabled},model:{value:t.editForm.attr_values,callback:function(e){t.$set(t.editForm,"attr_values",e)},expression:"editForm.attr_values"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]},st=a("VU/8")(rt,ot,!1,null,null,null).exports,nt={data:function(){return{goodstypeData:[],page:1,pagecount:1,tableloading:!0,addFormVisible:!1,addForm:{cat_name:"",attr_group:""},editForm:{cat_name:"",attr_group:""},editFormVisible:!1}},methods:{getgoodstype:function(){var t=this;this.tableloading=!0,ea({page:this.page,type:this.type}).then(function(e){if(200==e.data.code){for(var a in t.pagecount=e.data.data.pagecount,t.goodstypeData=e.data.data.item,e.data.data.item)1==e.data.data.item[a].enabled?e.data.data.item[a].enabledname="√":e.data.data.item[a].enabledname="×";t.tableloading=!1}})},getGusp:function(t){var e=this;goodsInfo({gshp_id:t}).then(function(t){e.addForm.gsup_name=t.data.data.name,e.addForm.gsup_id=t.data.data.gsup_id,e.editForm.gsup_name=t.data.data.name,e.editForm.gsup_id=t.data.data.gsup_id})},handleCurrentChange:function(t){this.page=t,this.getgoodstype()},handleAdd:function(){this.addFormVisible=!0},addSubmit:function(){var t=this,e=this;this.$refs.addForm.validate(function(a){a&&t.$confirm("确认提交吗？","提示",{}).then(function(){var a={cat_name:t.addForm.cat_name,attr_group:t.addForm.attr_group};aa(a).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.addFormVisible=!1,e.getgoodstype()):e.$message({message:t.msg,type:"warning"})})})})},handleEdit:function(t){this.editForm=t,this.editFormVisible=!0},editSubmit:function(){var t=this,e=this;this.$confirm("确认提交吗？","提示",{}).then(function(){var a={cat_id:t.editForm.cat_id,cat_name:t.editForm.cat_name,attr_group:t.editForm.attr_group};ia(a).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.editFormVisible=!1,e.getgoodstype()):e.$message({message:t.msg,type:"warning"})})})},handleDel:function(t){var e=this;this.$confirm("确认提交吗？","提示",{}).then(function(){ra({cat_id:t.cat_id}).then(function(t){200==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.getgoodstype()):e.$message({message:t.data.msg,type:"warning"})})})},lookattr:function(t){var e=t.cat_id;this.$router.push({name:"商品属性",params:{id:e}})}},mounted:function(){this.getgoodstype()},watch:{addFormVisible:function(t,e){t||this.$refs.addForm.resetFields()},editFormVisible:function(t,e){t||this.$refs.editForm.resetFields()}}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("新增")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.goodstypeData,border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"cat_name",label:"商品类型名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attr_count",label:"属性数"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-view"},on:{click:function(a){return t.lookattr(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-count":t.pagecount},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisible},on:{"update:visible":function(e){t.addFormVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"商品类型名称",prop:"cat_name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.cat_name,callback:function(e){t.$set(t.addForm,"cat_name",e)},expression:"addForm.cat_name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"商品类型名称",prop:"cat_name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.cat_name,callback:function(e){t.$set(t.editForm,"cat_name",e)},expression:"editForm.cat_name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]},dt=a("VU/8")(nt,lt,!1,null,null,null).exports,ct={data:function(){return{storeLists:[],addFormVisiblefather:!1,addFormVisibleson:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入",trigger:"blur"}]},addFormfather:{cat_name:"",sort_order:"",is_show:1},parent_id:"",addFormson:{cat_name:"",sort_order:"",is_show:1},editFormVisible:!1,editFormfather:{redirect_type:"",redirect_id:"",redirect_name:""},editFormson:{cat_name:"",sort_order:"",is_show:1},lunbo:{img:"",redirect_id:"",redirect_name:"",redirect_type:"",redirect:{}},lunbodata:[],editFormVisiblefather:!1,editFormVisibleson:!1,editselecteOptions:[{value:0,label:"无操作"},{value:1,label:"商品详情"},{value:2,label:"分类详情"},{value:3,label:"活动详情"}],options6:[],loading:!0,options8:[],expands:[]}},methods:{sureSort:function(t){var e=this,a=new FormData;a.append("cat_id",t.cat_id),a.append("parent_id",t.parent_id),a.append("sort_order",t.sort_order),je(a).then(function(t){200==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.getstoreLists()):e.$message({message:t.data.msg,type:"warning"})})},clearCat:function(){var t=this;this.$confirm("确认清除吗?","提示",{type:"warning"}).then(function(){t.listLoading=!0;Me({arg:"parent_categories_tree:*"}).then(function(e){200==e.code?(t.listLoading=!1,t.$message({message:e.msg,type:"success"}),t.getstoreLists()):t.$message({message:e.msg,type:"warning"})})})},clearGood:function(){var t=this;this.$confirm("确认清除吗?","提示",{type:"warning"}).then(function(){t.listLoading=!0;Me({arg:"product_list_index:*"}).then(function(e){200==e.code?(t.listLoading=!1,t.$message({message:e.msg,type:"success"}),t.getstoreLists()):t.$message({message:e.msg,type:"warning"})})})},getstoreLists:function(){var t=this;Re().then(function(e){200==e.data.code&&(t.storeLists=e.data.data.item)})},is_show_formatter:function(t){return 1==t.is_show?"是":"否"},handleAddfather:function(){this.addFormVisiblefather=!0},addSubmitfather:function(){var t=this,e=this;this.$refs.addFormfather.validate(function(a){a&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.addLoading=!0;var a=new FormData;a.append("parent_id",0),a.append("cat_name",t.addFormfather.cat_name),a.append("sort_order",t.addFormfather.sort_order),a.append("is_show",t.addFormfather.is_show),a.append("mobile_icon",t.addFormfather.mobile_icon),ze(a).then(function(t){200==t.data.code?(e.addFormVisiblefather=!1,e.$message({message:t.data.msg,type:"success"}),e.getstoreLists()):e.$message({message:t.data.msg,type:"warning"})})})})},handleAddson:function(t){this.parent_id=t.cat_id,this.addFormVisibleson=!0},addSubmitson:function(){var t=this,e=this;this.$refs.addFormson.validate(function(a){a&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.addLoading=!0;var a=new FormData;a.append("parent_id",t.parent_id),a.append("cat_name",t.addFormson.cat_name),a.append("sort_order",t.addFormson.sort_order),a.append("is_show",t.addFormson.is_show),a.append("type",1),a.append("mobile_icon",t.addFormson.mobile_icon),ze(a).then(function(t){200==t.data.code?(e.addFormVisibleson=!1,e.$message({message:t.data.msg,type:"success"}),e.getstoreLists()):e.$message({message:t.data.msg,type:"warning"})})})})},handleEditfather:function(t){this.editFormVisiblefather=!0,this.options6=[{value:t.redirect_id,label:t.redirect_name}],this.editFormfather=t,null!=t.swiper?this.lunbodata=JSON.parse(t.swiper):this.lunbodata=[]},editSubmitfather:function(){var t=this;this.$refs.editFormfather.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){var e=t,a=new FormData;a.append("cat_id",t.editFormfather.cat_id),a.append("is_show",t.editFormfather.is_show),a.append("cat_name",t.editFormfather.cat_name),a.append("parent_id",0),a.append("sort_order",t.editFormfather.sort_order),null!=t.editFormfather.mobile_icon&&a.append("mobile_icon",t.editFormfather.mobile_icon),je(a).then(function(t){200==t.data.code?(e.editFormVisiblefather=!1,e.$message({message:t.data.msg,type:"success"})):e.$message({message:t.data.msg,type:"warning"})})})})},handleEditson:function(t){this.editFormVisibleson=!0,this.editFormson=t},editSubmitson:function(){var t=this;this.$refs.editFormson.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){var e=t,a=new FormData;a.append("is_show",t.editFormson.is_show),a.append("cat_name",t.editFormson.cat_name),a.append("sort_order",t.editFormson.sort_order),a.append("type",1),a.append("cat_id",t.editFormson.cat_id),a.append("parent_id",t.editFormson.parent_id),a.append("mobile_icon",t.editFormson.mobile_icon),je(a).then(function(t){200==t.data.code?(e.editFormVisibleson=!1,e.$message({message:t.data.msg,type:"success"})):e.$message({message:t.data.msg,type:"warning"})})})})},handleDel:function(t){var e=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){e.listLoading=!0;var a={id:t.cat_id,type:3};Te(a).then(function(t){200==t.data.code?(e.listLoading=!1,e.$message({message:t.data.msg,type:"success"}),e.getstoreLists()):e.$message({message:t.data.msg,type:"warning"})})}).catch(function(){})},edit_option_change:function(){this.editFormfather.redirect_id=""}},watch:{editFormVisiblefather:function(t){t||this.getstoreLists()},editFormVisibleson:function(t){t||this.getstoreLists()},addFormVisibleson:function(t){t||(this.addFormson={cat_name:"",sort_order:"",is_show:1})}},mounted:function(){this.getstoreLists()}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddfather}},[t._v("新增父级")]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.clearCat}},[t._v("清除分类缓存")]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.clearGood}},[t._v("清除商品缓存")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.storeLists,"row-key":"cat_id",border:"","expand-row-keys":t.expands}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.child}},[a("el-table-column",{attrs:{prop:"cat_id",label:"子级分类ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cat_name",label:"子级分类名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort_order",label:"排序",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:1,max:999,label:"",size:"mini","controls-position":"right"},model:{value:e.row.sort_order,callback:function(a){t.$set(e.row,"sort_order",a)},expression:"scope.row.sort_order"}}),t._v(" "),a("el-button",{attrs:{icon:"el-icon-check"},on:{click:function(a){return t.sureSort(e.row)}}},[t._v("确定")])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"is_show",label:"启用",formatter:t.is_show_formatter}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-edit"},on:{click:function(a){return t.handleEditson(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")])]}}],null,!0)})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"父级分类ID",prop:"cat_id"}}),t._v(" "),a("el-table-column",{attrs:{label:"父级分类名称",prop:"cat_name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort_order",label:"排序",sortable:"",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_show",label:"启用",formatter:t.is_show_formatter,width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.handleAddson(e.row)}}},[t._v("新增子类")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-edit"},on:{click:function(a){return t.handleEditfather(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisiblefather},on:{"update:visible":function(e){t.addFormVisiblefather=e}}},[a("el-form",{ref:"addFormfather",attrs:{model:t.addFormfather,"label-width":"200px",rules:t.addFormRules}},[a("el-form-item",{attrs:{label:"父级名称"}},[a("el-input",{model:{value:t.addFormfather.cat_name,callback:function(e){t.$set(t.addFormfather,"cat_name",e)},expression:"addFormfather.cat_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.addFormfather.sort_order,callback:function(e){t.$set(t.addFormfather,"sort_order",e)},expression:"addFormfather.sort_order"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用",prop:"is_show"}},[a("el-radio-group",{model:{value:t.addFormfather.is_show,callback:function(e){t.$set(t.addFormfather,"is_show",e)},expression:"addFormfather.is_show"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图片"}},[a("VueImgInputer",{attrs:{theme:"light"},model:{value:t.addFormfather.mobile_icon,callback:function(e){t.$set(t.addFormfather,"mobile_icon",e)},expression:"addFormfather.mobile_icon"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisiblefather=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addSubmitfather(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增son",visible:t.addFormVisibleson},on:{"update:visible":function(e){t.addFormVisibleson=e}}},[a("el-form",{ref:"addFormson",attrs:{model:t.addFormson,"label-width":"200px",rules:t.addFormRules}},[a("el-form-item",{attrs:{label:"子级名称"}},[a("el-input",{model:{value:t.addFormson.cat_name,callback:function(e){t.$set(t.addFormson,"cat_name",e)},expression:"addFormson.cat_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.addFormson.sort_order,callback:function(e){t.$set(t.addFormson,"sort_order",e)},expression:"addFormson.sort_order"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用",prop:"is_show"}},[a("el-radio-group",{model:{value:t.addFormson.is_show,callback:function(e){t.$set(t.addFormson,"is_show",e)},expression:"addFormson.is_show"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图片"}},[a("VueImgInputer",{attrs:{theme:"light"},model:{value:t.addFormson.mobile_icon,callback:function(e){t.$set(t.addFormson,"mobile_icon",e)},expression:"addFormson.mobile_icon"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisibleson=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addSubmitson(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisiblefather},on:{"update:visible":function(e){t.editFormVisiblefather=e}}},[a("el-form",{ref:"editFormfather",attrs:{model:t.editFormfather,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"广告名称"}},[a("el-input",{model:{value:t.editFormfather.cat_name,callback:function(e){t.$set(t.editFormfather,"cat_name",e)},expression:"editFormfather.cat_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.editFormfather.sort_order,callback:function(e){t.$set(t.editFormfather,"sort_order",e)},expression:"editFormfather.sort_order"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用",prop:"is_show"}},[a("el-radio-group",{model:{value:t.editFormfather.is_show,callback:function(e){t.$set(t.editFormfather,"is_show",e)},expression:"editFormfather.is_show"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"手机端小标图"}},[a("VueImgInputer",{attrs:{theme:"light",imgSrc:t.editFormfather.mobile_icon},model:{value:t.editFormfather.mobile_icon,callback:function(e){t.$set(t.editFormfather,"mobile_icon",e)},expression:"editFormfather.mobile_icon"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisiblefather=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmitfather(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑son",visible:t.editFormVisibleson},on:{"update:visible":function(e){t.editFormVisibleson=e}}},[a("el-form",{ref:"editFormson",attrs:{model:t.editFormson,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"广告名称"}},[a("el-input",{model:{value:t.editFormson.cat_name,callback:function(e){t.$set(t.editFormson,"cat_name",e)},expression:"editFormson.cat_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.editFormson.sort_order,callback:function(e){t.$set(t.editFormson,"sort_order",e)},expression:"editFormson.sort_order"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用",prop:"is_show"}},[a("el-radio-group",{model:{value:t.editFormson.is_show,callback:function(e){t.$set(t.editFormson,"is_show",e)},expression:"editFormson.is_show"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"手机端小标图"}},[a("VueImgInputer",{attrs:{theme:"light",imgSrc:t.editFormson.mobile_icon},model:{value:t.editFormson.mobile_icon,callback:function(e){t.$set(t.editFormson,"mobile_icon",e)},expression:"editFormson.mobile_icon"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisibleson=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmitson(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var mt=a("VU/8")(ct,ut,!1,function(t){a("K8fa")},"data-v-a0b24a8a",null).exports,pt={data:function(){return{commentuserData:[],page:1,pagecount:1,tableloading:!0,content:"",id_value:"",comment_rank:99,comment_rankoptions:[{label:"全部",value:99},{label:"没★",value:0},{label:"★",value:1},{label:"★★",value:2},{label:"★★★",value:3},{label:"★★★★",value:4},{label:"★★★★★",value:5}],is_content:!1,replyVisible:!1,reply:{},comment_id:"",replydata:[],reply_comment_id:"",reply_user_name:"",reply_content:"",reply_user_id:"",replysonVisible:!1,btn:0,editFormVisible:!1,editForm:{comment_rank:"",content:""}}},methods:{getcommentuser:function(){var t=this;this.tableloading=!0;var e={};e.page=this.page,""!=this.content&&(e.content=this.content),""!=this.id_value&&(e.id_value=this.id_value),99!=this.comment_rank&&(e.comment_rank=this.comment_rank),this.is_content&&(e.is_content=this.changeswitch(this.is_content)),ua(e).then(function(e){200==e.data.code&&(t.pagecount=e.data.data.pagecount,t.commentuserData=e.data.data.item,t.tableloading=!1)})},handleCurrentChange:function(t){this.page=t,this.getcommentuser()},handleInfo:function(t){var e=this;this.replyVisible=!0,this.comment_id=t.comment_id,ma({comment_id:t.comment_id}).then(function(a){e.reply=t,e.replydata=a.data.data.item})},replyson:function(t,e){this.replysonVisible=!0,this.reply_comment_id=t.comment_id,void 0!=t.user_id&&(this.reply_user_id=t.user_id),this.btn=e},replySubmit:function(){var t=this,e={comment_id:this.reply.comment_id,user_name:this.reply_user_name,content:this.reply_content};this.btn&&(e.to_fd=this.reply_comment_id),_a(e).then(function(e){console.log(e),200==e.code&&(t.$message({message:e.msg,type:"success"}),t.replysonVisible=!1,ma({comment_id:t.comment_id}).then(function(e){t.replydata=e.data.data.item}))})},enablesta:function(t,e){var a=this;ha({comment_id:t.comment_id}).then(function(t){200==t.code&&(a.$message({message:t.msg,type:"success"}),e&&(a.reply.status=-1*(a.reply.status-1)),ma({comment_id:a.comment_id}).then(function(t){a.replydata=t.data.data.item}))})},handleEdit:function(t){this.editFormVisible=!0,this.editForm=t},editSubmit:function(){var t=this,e=this;this.$confirm("确认提交吗？","提示",{}).then(function(){var a={comment_id:t.editForm.comment_id,comment_rank:t.editForm.comment_rank,content:t.editForm.content};pa(a).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.editFormVisible=!1,e.getcommentuser()):e.$message({message:t.msg,type:"warning"})})})}},mounted:function(){this.getcommentuser()}},_t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",{staticStyle:{float:"left"}},[t._v("输入评论内容 :")]),t._v(" "),a("div",{staticStyle:{float:"left","margin-left":"20px"}},[a("el-input",{attrs:{type:"text"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[t._v("商品id:")]),t._v(" "),a("div",{staticStyle:{float:"left","margin-left":"20px"}},[a("el-input",{attrs:{type:"text"},model:{value:t.id_value,callback:function(e){t.id_value=e},expression:"id_value"}})],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[t._v("评价等级:")]),t._v(" "),a("div",{staticStyle:{float:"left","margin-left":"20px"}},[a("el-select",{model:{value:t.comment_rank,callback:function(e){t.comment_rank=e},expression:"comment_rank"}},t._l(t.comment_rankoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticStyle:{float:"left","margin-left":"20px"}},[a("el-checkbox",{model:{value:t.is_content,callback:function(e){t.is_content=e},expression:"is_content"}},[t._v("是否显示无内容评论")])],1),t._v(" "),a("div",{staticStyle:{float:"left","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getcommentuser}},[t._v("搜索")])],1)])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.commentuserData,border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"comment_id",label:" 编号",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"用户名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"评论对象"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.title)+"\n          "),a("span",{staticStyle:{color:"#ff7e00"}},[t._v(t._s(e.row.goods_attr))]),t._v(" "),0==e.row.official_reply?a("span",{staticStyle:{color:"red","font-weight":"700"}},[t._v("未回复")]):a("span",{staticStyle:{color:"green","font-weight":"700"}},[t._v("已回复")])]),t._v(" "),a("p",{staticStyle:{"font-weight":"600"}},[t._v("评论内容："+t._s(e.row.content))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"评论时间",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{label:"\t状态",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("p",[t._v("显示")]):t._e(),t._v(" "),0==e.row.status?a("p",[t._v("不显示")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-view",id:"one"},on:{click:function(a){return t.handleInfo(e.row)}}},[t._v("详情")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-count":t.pagecount},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.replyVisible,width:"60%"},on:{"update:visible":function(e){t.replyVisible=e}}},[a("p",[a("span",{staticStyle:{"font-weight":"600"}},[t._v(t._s(t.reply.user_name))]),t._v(" 于 \n      "),a("span",{staticStyle:{"font-weight":"600"}},[t._v(t._s(t.reply.add_time))]),t._v(" 对 \n      "),a("span",{staticStyle:{color:"#E4A825"}},[t._v(t._s(t.reply.title))]),t._v(" "),a("span",{staticStyle:{color:"#C12F12"}},[t._v(t._s(t.reply.goods_attr))]),t._v("  发表评论")]),t._v(" "),a("hr",{attrs:{color:"#dadada",size:"1"}}),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("p",{staticStyle:{paddin:"5px 0","font-weight":"600"}},[t._v("主评论："+t._s(t.reply.content))]),t._v(" "),a("p",{staticStyle:{"text-align":"right"}},[0==t.reply.status?a("span",{staticStyle:{color:"red","margin-right":"20px"}},[t._v("不显示")]):t._e(),t._v(" "),a("span",[t._v(t._s(t.reply.add_time))])]),t._v(" "),a("p",{staticStyle:{"text-align":"center","padding-bottom":"5px"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.enablesta(t.reply,1)}}},[t._v("显示")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.replyson(t.reply,0)}}},[t._v("回复")])],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("hr",{attrs:{color:"#dadada",size:"1"}}),t._v(" "),t._l(t.replydata,function(e){return a("div",[a("p",{staticStyle:{paddin:"5px 0"}},[1==e.is_official&&0==e.is_twice&&0!=e.to_fd?a("span",[t._v("【官方】"+t._s(e.user_name)+"回复"+t._s(e.to_user_name)+":")]):t._e(),t._v(" "),0==e.is_official&&1==e.is_twice&&0!=e.to_fd?a("span",[t._v(t._s(e.user_name)+"【评论人】回复"+t._s(e.to_user_name)+"：")]):t._e(),t._v(" "),0==e.is_official&&0==e.is_twice&&0!=e.to_fd?a("span",[t._v(t._s(e.user_name)+"【他人】回复"+t._s(e.to_user_name)+"：")]):t._e(),t._v(" "),1==e.is_official&&0==e.is_twice&&0==e.to_fd?a("span",[t._v("【官方】"+t._s(e.user_name)+"：")]):t._e(),t._v(" "),0==e.is_official&&1==e.is_twice&&0==e.to_fd?a("span",[t._v("【评论人】"+t._s(e.user_name)+"：")]):t._e(),t._v(" "),0==e.is_official&&0==e.is_twice&&0==e.to_fd?a("span",[t._v("【他人】"+t._s(e.user_name)+"：")]):t._e(),t._v(t._s(e.content))]),t._v(" "),a("p",{staticStyle:{"text-align":"right"}},[0==e.status?a("span",{staticStyle:{color:"red","margin-right":"20px"}},[t._v("不显示")]):t._e(),t._v(" "),a("span",[t._v(t._s(e.add_time))])]),t._v(" "),a("p",{staticStyle:{"text-align":"center","padding-bottom":"5px"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.enablesta(e,0)}}},[t._v("显示")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.replyson(e,1)}}},[t._v("回复")])],1),t._v(" "),a("hr",{attrs:{color:"#dadada",size:"1"}})])})],2),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.replysonVisible,width:"30%"},on:{"update:visible":function(e){t.replysonVisible=e}}},[t._v("\n    客服名:\n    "),a("el-input",{attrs:{placeholder:"客服名"},model:{value:t.reply_user_name,callback:function(e){t.reply_user_name=e},expression:"reply_user_name"}}),t._v("\n    回复内容:\n    "),a("el-input",{attrs:{type:"textarea",placeholder:"输入回复内容"},model:{value:t.reply_content,callback:function(e){t.reply_content=e},expression:"reply_content"}}),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("p",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.replySubmit(t.btn)}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"评论内容",prop:"content"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.content,callback:function(e){t.$set(t.editForm,"content",e)},expression:"editForm.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"评论登记",prop:"comment_rank"}},[a("el-rate",{model:{value:t.editForm.comment_rank,callback:function(e){t.$set(t.editForm,"comment_rank",e)},expression:"editForm.comment_rank"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]},ht=(a("VU/8")(pt,_t,!1,null,null,null).exports,a("sVpU")),ft=a.n(ht),gt={components:{},data:function(){return{orderData:[],pagecount:1,count:1,page:1,pagesize:15,tableloading:!0,infoloading:!0,HYaddress:[],order_sn:"",order_id:"",consignee:"",o_status:"",goods_name:"",logistics_typeOptions:[],fahuoFormVisible:!1,fahuoFormRules:{invoice_no:[{required:!0,message:"请输入快递单号",trigger:"blur"}],logistics_type:[{required:!0,message:"请选择快递公司",trigger:"change"}]},fahuoForm:{order_id:0,invoice_no:"",logistics_type:"",consign_time:this.changetime(new Date)},g_status:99,o_statusoptions:JSON.parse(sessionStorage.getItem("data")).data.argument.o_status,label:"",user_name:"",create_time:this.changetime((new Date).setMonth((new Date).getMonth()-6)),end_time:this.changetime(new Date),is_fapiao:0,is_dingjin:!1,code:"",infoGood:[],sendoptions:[],goodoptions:[],sendaddress:0,push_ids:[],DeliveryVisible:!1,DeliveryData:[],isShow:!1,dataSwt:!0}},created:function(){var t=this;Oa().then(function(e){t.logistics_typeOptions=e.data.data})},methods:{getOrder:function(){var t=this,e={};e.page=this.page,e.limit=this.pagesize,e.create_time=this.create_time,e.end_time=this.end_time,e.is_dingjin=this.changeswitch(this.is_dingjin),this.tableloading=!0,""!=this.order_id&&(e.order_id=this.order_id),""!=this.goods_name&&(e.goods_name=this.goods_name),""!=this.order_sn&&(e.order_sn=this.order_sn),""!=this.consignee&&(e.consignee=this.consignee),""!=this.label&&(e.label=this.label),""!=this.user_name&&(e.user_name=this.user_name),"99"!=this.o_status&&(e.o_status=this.o_status),this.is_fapiao&&(e.is_fapiao=this.is_fapiao),this.sendaddress&&(e.sendaddress=this.sendaddress),99!=this.g_status&&(e.g_status=this.g_status),this.code&&(e.code=this.code),this.dataSwt&&(this.dataSwt=!1,Da(e).then(function(e){if(200==e.data.code){for(var a in t.tableloading=!1,t.dataSwt=!0,e.data.data.item)for(var i in t.HYaddress)e.data.data.item[a].province==i&&(e.data.data.item[a].provincename=t.HYaddress[i]),e.data.data.item[a].city==i&&(e.data.data.item[a].cityname=t.HYaddress[i]),e.data.data.item[a].district==i&&(e.data.data.item[a].districtname=t.HYaddress[i]);t.orderData=e.data.data.item,e.data.data.item.forEach(function(e,a){t.orderData[a].shouhuoren=e.consignee+"[地址:]"+e.provincename+e.cityname+e.districtname+e.address,t.orderData[a].biaoqian=e.label}),t.pagecount=e.data.data.pagecount,t.count=e.data.data.count}else t.dataSwt=!0}))},showgoodInfo:function(t){var e=this,a=t.order_id;Ea({order_id:a}).then(function(t){e.infoGood=t.data.data.order_goods.item,e.infoloading=!1})},hidegoodInfo:function(){this.infoGood=[],this.infoloading=!0},handleCurrentChange:function(t){this.page=t,this.getOrder()},handleSizeChange:function(t){this.pagesize=t,this.getOrder()},exportCsv:function(){var t=this.$refs.table.$children.filter(function(t){return null!=t.prop}),e=t.map(function(t){return t.prop}),a=t.map(function(t){return t.label});!function(t,e,a,i){try{var r=ft()({data:t,fields:e,fieldNames:a}),o=r.split(",");for(var s in o)console.log("\\t"==o[s].substr(o[s].length-3,2)),"\\t"==o[s].substr(o[s].length-3,2)&&(o[s]=o[s].substring(0,o[s].length-3)+o[s].substring(o[s].length-1,o[s].length)),o[s]=o[s]+"\t";r=o.join();var n=encodeURI("data:application/octet-stream;charset=utf-8,\ufeff"+r),l=document.createElement("a");l.setAttribute("href",n),l.setAttribute("download",(i||"file")+".csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(t){console.error(t)}}(this.orderData,e,a,"列表")},handleFahuo:function(t){this.fahuoFormVisible=!0,this.fahuoForm.order_id=t.order_id},fahuoSubmit:function(){var t=this;this.$refs.fahuoForm.validate(function(e){e&&t.$confirm("确认发货?","提示",{type:"warning"}).then(function(){Ia(t.fahuoForm).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.getOrder(),t.fahuoFormVisible=!1,t.$refs.fahuoForm.resetFields()):t.$message({message:e.msg,type:"warning"})})})})},handleSelect:function(t){this.push_ids=t.map(function(t){return t.order_id})},handleInfo:function(t){var e=t.order_id;this.$router.push({path:"/order/info/"+e})},handleDelivery:function(t){var e=this;Xe({order_id:t.order_id}).then(function(t){200==t.data.code&&(e.DeliveryVisible=!0,e.DeliveryData=t.data.data)})}},mounted:function(){var t=this;this.HYaddress=JSON.parse(localStorage.getItem("HYaddress")),null==this.HYaddress?Ca().then(function(e){localStorage.setItem("HYaddress",w()(e.data.data)),t.HYaddress=JSON.parse(localStorage.getItem("HYaddress")),t.getOrder()}):this.getOrder();var e=JSON.parse(sessionStorage.getItem("data"));this.sendoptions=e.data.argument.sendaddress,this.goodoptions=e.data.argument.g_status,this.sendoptions.unshift({value:0,label:"--------------请选择--------------"})},activated:function(){var t=this;this.HYaddress=JSON.parse(localStorage.getItem("HYaddress")),null==this.HYaddress?Ca().then(function(e){localStorage.setItem("HYaddress",w()(e.data.data)),t.HYaddress=JSON.parse(localStorage.getItem("HYaddress")),t.getOrder()}):this.getOrder();var e=JSON.parse(sessionStorage.getItem("data"));this.sendoptions=e.data.argument.sendaddress,this.goodoptions=e.data.argument.g_status,this.sendoptions.unshift({value:0,label:"--------------请选择--------------"})}},vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{size:"mini"},model:{value:t.order_id,callback:function(e){t.order_id=e},expression:"order_id"}},[a("template",{slot:"prepend"},[t._v("订单ID")])],2)],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{size:"mini"},model:{value:t.order_sn,callback:function(e){t.order_sn=e},expression:"order_sn"}},[a("template",{slot:"prepend"},[t._v("订单号")])],2)],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{size:"mini"},model:{value:t.consignee,callback:function(e){t.consignee=e},expression:"consignee"}},[a("template",{slot:"prepend"},[t._v("收货人")])],2)],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{size:"mini"},model:{value:t.user_name,callback:function(e){t.user_name=e},expression:"user_name"}},[a("template",{slot:"prepend"},[t._v("下单人")])],2)],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{size:"mini"},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[a("template",{slot:"prepend"},[t._v("标签")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"订单状态"}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:t.getOrder},model:{value:t.o_status,callback:function(e){t.o_status=e},expression:"o_status"}},t._l(t.o_statusoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{size:"mini"},model:{value:t.goods_name,callback:function(e){t.goods_name=e},expression:"goods_name"}},[a("template",{slot:"prepend"},[t._v("商品名称")])],2)],1),t._v(" "),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择下单开始日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.create_time,callback:function(e){t.create_time=e},expression:"create_time"}})],1),t._v(" "),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择下单结束日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.getOrder}},[t._v("搜索")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-printer",type:"warning"},on:{click:t.exportCsv}},[t._v("导出")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{display:"table-cell"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.orderData,border:"","element-loading-text":"拼命加载中"},on:{"row-dblclick":t.handleInfo,"selection-change":t.handleSelect}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{prop:"order_id",label:"订单ID",width:"65"}}),t._v(" "),a("el-table-column",{attrs:{prop:"order_sn",label:"订单号",width:"155"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"bottom",trigger:"hover","open-delay":1500},on:{show:function(a){return t.showgoodInfo(e.row)},hide:t.hidegoodInfo}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.infoloading,expression:"infoloading"}],attrs:{data:t.infoGood,"element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{width:"400",prop:"goods_name",label:"商品名称"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",prop:"goods_sn",label:"商品货号"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",prop:"goods_price",label:"商品价格(￥)"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",prop:"goods_number",label:"购买数量"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",prop:"goods_attr",label:"商品属性"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",prop:"stock",label:"商品库存"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",prop:"goods_price",label:"积分小计(￥)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s((e.row.goods_number*e.row.goods_price).toFixed(2)))])]}}],null,!0)})],1),t._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("p",[t._v(t._s(e.row.order_sn)+" ")]),t._v(" "),a("p",{staticStyle:{color:"red"}},[t._v("数据来源："+t._s(e.row.referer)+" ")]),t._v(" "),a("p",[t._v(t._s(e.row.print_info)+" ")])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"sendaddress_name",label:"发货地",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"下单时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.nick)+" ")]),t._v(" "),a("p",[t._v(t._s(e.row.add_time)+" ")]),t._v(" "),a("p",{staticStyle:{color:"red","font-weight":"600"}},[t._v(t._s(e.row.msg_to_shop)+" ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pay_time",label:"付款时间",width:"135"}}),t._v(" "),a("el-table-column",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],attrs:{prop:"phone",label:"手机号",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"shouhuoren",label:"收货人"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.consignee)+"[TEL: "+t._s(e.row.phone)+"] ")]),t._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[t._v(t._s(e.row.provincename))]),t._v(" "+t._s(e.row.cityname)+t._s(e.row.districtname)+t._s(e.row.address))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"order_amount",label:"总积分",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"money_paid",label:"应付积分",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"o_status",label:"订单状态",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"290"},scopedSlots:t._u([{key:"default",fn:function(e){return["等待卖家发货"==e.row.o_status?a("el-button",{attrs:{icon:"el-icon-printer"},on:{click:function(a){return t.handleFahuo(e.row)}}},[t._v("发货")]):t._e(),t._v(" "),a("el-button",{attrs:{icon:"el-icon-view"},on:{click:function(a){return t.handleInfo(e.row)}}},[t._v("详情")]),t._v(" "),"发货完成"==e.row.o_status||"申请退货"==e.row.o_status||"退货完成"==e.row.o_status||"交易成功"==e.row.o_status?a("el-button",{attrs:{icon:"el-icon-view"},on:{click:function(a){return t.handleDelivery(e.row)}}},[t._v("发货单")]):t._e()]}}])})],1)],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{"page-sizes":[15,50,100,200],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"发货单信息",visible:t.DeliveryVisible},on:{"update:visible":function(e){t.DeliveryVisible=e}}},[a("el-table",{attrs:{data:t.DeliveryData,border:""}},[a("el-table-column",{attrs:{prop:"invoice_no",label:"快递单号",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"consign_time",label:"发货时间\t"}}),t._v(" "),a("el-table-column",{attrs:{prop:"logistics_name",label:"快递公司"}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"发货",visible:t.fahuoFormVisible},on:{"update:visible":function(e){t.fahuoFormVisible=e}}},[a("el-form",{ref:"fahuoForm",attrs:{model:t.fahuoForm,"label-width":"200px",rules:t.fahuoFormRules}},[a("el-form-item",{attrs:{label:"快递公司",prop:"logistics_type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.fahuoForm.logistics_type,callback:function(e){t.$set(t.fahuoForm,"logistics_type",e)},expression:"fahuoForm.logistics_type"}},t._l(t.logistics_typeOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"快递单号",prop:"invoice_no"}},[a("el-input",{model:{value:t.fahuoForm.invoice_no,callback:function(e){t.$set(t.fahuoForm,"invoice_no",e)},expression:"fahuoForm.invoice_no"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发出时间",prop:"consign_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择发出时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.fahuoForm.consign_time,callback:function(e){t.$set(t.fahuoForm,"consign_time",e)},expression:"fahuoForm.consign_time"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.fahuoFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.fahuoSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]},bt=a("VU/8")(gt,vt,!1,null,null,null).exports,yt={data:function(){return{infodata:Object,reason_img:[],loading:!1,action_note:"",btnloading:!1}},methods:{getdata:function(){var t=this;Qe({refund_id:this.$route.params.id}).then(function(e){t.infodata=e.data.data,t.loading=!0,t.reason_img=t.infodata.reason_img[0]})},backrou:function(){this.$router.push({path:"/back/lists/"})},cancelbackRef:function(){var t=this;ta({refund_id:this.$route.params.id,action_note:this.action_note}).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.$router.push({path:"/back/lists/"})):t.$message({message:e.msg,type:"warning"})})},backRef:function(){var t=this;this.btnloading=!0,We({refund_id:this.$route.params.id,action_note:this.action_note}).then(function(e){t.btnloading=!1,t.$message({message:e.msg,type:"success"}),200==e.code?t.$router.push({path:"/back/lists/"}):t.$message({message:e.msg,type:"warning"})})},closeDialog:function(){},showImg:function(){this.$refs.imgDiv.style.display="block"},hideImg:function(){this.$refs.imgDiv.style.display="none"},handleInfo:function(){var t=this.infodata.order_id;this.$router.push({path:"/order/info/"+t})}},mounted:function(){this.getdata()}},Ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"padding-top":"30px","font-size":"12px"}},[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",{staticStyle:{float:"left","padding-right":"10px","padding-left":"10px"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-back"},on:{click:function(e){return t.backrou()}}},[t._v("返回")])],1),t._v(" "),a("div",{staticStyle:{float:"left","padding-right":"10px","padding-left":"10px"}},[t._v("\n          退货单操作：查看\n        ")])])],1)],1),t._v(" "),a("div",{staticClass:"back_orderinfo",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("订单信息")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",{staticClass:"jieshi"},[t._v("订单号：")]),t._v(" "),a("td",[a("router-link",{attrs:{to:{name:"订单详情",params:{id:t.infodata.order_id}}}},[t._v(t._s(t.infodata.order_sn))])],1),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("退货原因：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.reason_info))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("退货前的订单状态：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.status_name))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("申请退货时间：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.add_time))])]),t._v(" "),t._m(0),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("退货单号：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.refund_sn))]),t._v(" "),a("td",{staticClass:"jieshi"}),t._v(" "),a("td")])])],1),t._v(" "),a("div",{staticClass:"back_orderinfo",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("其他信息\n      ")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",{staticClass:"jieshi"},[t._v("客户备注：")]),t._v(" "),a("td",[t._v("\n          "+t._s(t.infodata.msg_to_shop)+"\n        ")])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("退货快递单号：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.refund_invoince_no))])])])],1),t._v(" "),a("div",{staticClass:"back_orderinfo",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("下单人账户信息")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",{staticClass:"jieshi"},[t._v("用户id：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.user_id))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("用户名：")]),t._v(" "),a("td",[t._v(" "+t._s(t.infodata.user_name))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("昵称：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.nick))])])])],1),t._v(" "),a("div",{staticClass:"back_orderinfo",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("收货人信息")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",{staticClass:"jieshi"},[t._v("收货人：")]),t._v(" "),a("td",[t._v("\n          "+t._s(t.infodata.consignee)+"\n        ")])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("地址：")]),t._v(" "),a("td",[t._v("["+t._s(t.infodata.region)+"]"+t._s(t.infodata.address))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("电话：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.phone))])]),t._v(" "),t._m(1),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("退货凭证:")]),t._v(" "),a("td",[a("div",{staticStyle:{position:"relative"},on:{mouseover:function(e){return t.showImg()},mouseout:function(e){return t.hideImg()}}},[a("img",{staticStyle:{width:"200px"},attrs:{src:t.reason_img,alt:""}}),t._v(" "),a("div",{ref:"imgDiv",staticStyle:{width:"300px",height:"300px",position:"absolute",display:"none"}},[a("img",{attrs:{src:t.reason_img,alt:"",width:"600px",height:"500px"}})])])])])])],1),t._v(" "),a("div",{staticClass:"back_infogoods",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("商品信息")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[t._m(2),t._v(" "),t._l(t.infodata.refund_goods,function(e){return a("tr",[a("td",[t._v(t._s(e.goods_name)+"\n          "),null!=e.predate?a("span",{staticStyle:{color:"red"}},[t._v("【预售】\n            "),a("br"),t._v(t._s(e.predate)+" ")]):t._e()]),t._v(" "),a("td",[t._v(t._s(e.goods_attr))]),t._v(" "),a("td",[t._v(t._s(e.goods_price))]),t._v(" "),a("td",[t._v(t._s(e.goods_number)+" ")]),t._v(" "),a("td",[t._v(t._s(e.refund_goods_price-e.refund_bonus-e.refund_discount))]),t._v(" "),a("td",[t._v(t._s(e.refund_number))])])})],2)],1),t._v(" "),1!=t.infodata.status&&9!=t.infodata.status?a("div",{staticClass:"back_infogoods",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("操作信息")])]),t._v(" "),a("p",{staticStyle:{"text-align":"center","font-size":"16px","font-weight":"600"}},[t._v("退款商品金额（"+t._s(t.infodata.refund_goods_price)+"）\n      "),1==t.infodata.r_status||2==t.infodata.r_status?a("span"):t._e(),t._v("实际退款余额（"+t._s(t.infodata.refund_surplus)+"）")]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",{staticStyle:{width:"20%"}},[t._v("备注：")]),t._v(" "),a("td",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.action_note,expression:"action_note"}],attrs:{name:"",id:"",cols:"100",rows:"5"},domProps:{value:t.action_note},on:{input:function(e){e.target.composing||(t.action_note=e.target.value)}}})])]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"20%"}},[t._v("操作:")]),t._v(" "),a("td",[a("el-button",{attrs:{type:"warning",loading:t.btnloading},on:{click:function(e){return t.backRef()}}},[t._v("完成退货")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.cancelbackRef()}}},[t._v("取消退货")])],1)])])],1):t._e(),t._v(" "),1==t.infodata.status?a("div",{staticClass:"back_infogoods",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("退款金额信息")])]),t._v(" "),a("p",{staticStyle:{"text-align":"center","font-size":"16px","font-weight":"600"}},[t._v("退款商品金额（"+t._s(t.infodata.refund_goods_price)+"）\n     = 实际退款余额（"+t._s(t.infodata.refund_surplus)+"）\n    ")])],1):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"jieshi"},[this._v("支付方式：")]),this._v(" "),e("td",[this._v("积分")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"jieshi"},[this._v("客户留言:")]),this._v(" "),e("td")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("商品名称")]),t._v(" "),a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("单价")]),t._v(" "),a("th",[t._v("购买数量")]),t._v(" "),a("th",[t._v("实际支付金额")]),t._v(" "),a("th",[t._v("退货数量")])])}]};var kt=a("VU/8")(yt,Ft,!1,function(t){a("7h0A")},null,null).exports,wt={components:{},data:function(){return{activeName:"first",backData:[],pagetiao:20,pagecount:1,page:1,allid:[],tableloading:!0,shouldpdata:[],all:{data:""},stateoptions:[{value:0,label:"等待处理"},{value:1,label:"处理完成"},{value:9,label:"取消"}],rStateOption:[{value:0,label:"请选择订单状态"},{value:1,label:"等待卖家发货"},{value:4,label:"发货完成"}],reasonOption:[{value:0,label:"请选择退货原因"},{value:1,label:"卖家缺货"},{value:2,label:"质量问题/破损"},{value:3,label:"尺寸拍错"},{value:4,label:"颜色/规格/大小尺寸与描述不符"},{value:5,label:"卖家发错货"},{value:6,label:"卖家少发/漏发"},{value:7,label:"其他问题"}],status:0,r_status:0,reason_type:0,reason_info:"",user_name:"",refund_sn:"",order_sn:""}},methods:{gotodingdan:function(t){this.$router.push({path:"/order/info/"+t})},getBack:function(){var t=this;Ze({page:this.page,limit:this.pagetiao,refund_sn:this.refund_sn,order_sn:this.order_sn,status:this.status,r_status:this.r_status,reason_type:this.reason_type,reason_info:this.reason_info,user_name:this.user_name}).then(function(e){200==e.data.code&&(t.tableloading=!1,t.backData=e.data.data.item,t.pagecount=e.data.data.page_count)})},changetiao:function(){this.getBack()},handleCurrentChange:function(t){this.page=t,this.getBack()},handleslect:function(t){this.shouldpdata=[],this.shouldpdata=t},handleInfo:function(t){var e=t.id;this.$router.push({path:"/back/info/"+e})},handlefind:function(){this.getBack()}},mounted:function(){this.getBack()},activated:function(){this.getBack()}},xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{width:"100%"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",{staticStyle:{float:"left"}},[t._v("退货单号：")]),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入退货单号"},model:{value:t.refund_sn,callback:function(e){t.refund_sn=e},expression:"refund_sn"}})],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[t._v("订单号：")]),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入订单号"},model:{value:t.order_sn,callback:function(e){t.order_sn=e},expression:"order_sn"}})],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[t._v("状态：")]),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},on:{change:t.handlefind},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.stateoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[t._v("退货前状态：")]),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},on:{change:t.handlefind},model:{value:t.r_status,callback:function(e){t.r_status=e},expression:"r_status"}},t._l(t.rStateOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[t._v("退货原因：")]),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},on:{change:t.handlefind},model:{value:t.reason_type,callback:function(e){t.reason_type=e},expression:"reason_type"}},t._l(t.reasonOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[t._v("退款说明：")]),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入退款说明"},model:{value:t.reason_info,callback:function(e){t.reason_info=e},expression:"reason_info"}})],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[t._v("下单用户名：")]),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入下单用户名"},model:{value:t.user_name,callback:function(e){t.user_name=e},expression:"user_name"}})],1),t._v(" "),a("div",{staticStyle:{float:"left","padding-right":"10px","padding-left":"10px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handlefind}},[t._v("搜索")])],1)])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.backData,border:"","element-loading-text":"拼命加载中"},on:{"row-dblclick":t.handleInfo,"selection-change":t.handleslect}},[a("el-table-column",{attrs:{prop:"refund_sn",label:"退货单号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"order_sn",label:"订单号",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(a){return t.gotodingdan(e.row.order_id)}}},[t._v(t._s(e.row.order_sn))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"msg_to_buyer",label:"订单留言",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reason_type",label:"退货原因",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reason_info",label:"退款说明",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"申请时间",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type_name",label:"退货类型",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status_name",label:"状态",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return["等待处理"==e.row.status_name?a("p",{staticStyle:{color:"red"}},[t._v("等待处理")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primry",icon:"el-icon-view"},on:{click:function(a){return t.handleInfo(e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-count":t.pagecount},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("p",{staticStyle:{"font-size":"13px",color:"#48576a"}},[t._v("每页条数："),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pagetiao,expression:"pagetiao"}],attrs:{type:"text",id:"tiaoshu"},domProps:{value:t.pagetiao},on:{blur:t.changetiao,input:function(e){e.target.composing||(t.pagetiao=e.target.value)}}})])],1)],1)},staticRenderFns:[]};var $t=a("VU/8")(wt,xt,!1,function(t){a("JCYL")},null,null).exports,St={data:function(){return{infodata:Object,infoGood:{},HYaddress:[],shouldPay:"",editForm:{order_id:"",type:0,o_status:"",msg_to_buyer:"",label:"",province:"",city:"",district:"",address:"",phone:"",email:"",zipcode:"",best_time:"",consignee:"",shipping_fee:"",action_note:"",list:[]},pOption:[],cOption:[],dOption:[],o_statusoptions:JSON.parse(sessionStorage.getItem("data")).data.argument.o_status,editFormVisible:!1}},methods:{getData:function(){var t=this;this.HYaddress=JSON.parse(localStorage.getItem("HYaddress")),Ea({order_id:this.$route.params.id}).then(function(e){for(var a in t.HYaddress)e.data.data.province==a&&(e.data.data.provincename=t.HYaddress[a]),e.data.data.city==a&&(e.data.data.cityname=t.HYaddress[a]),e.data.data.district==a&&(e.data.data.districtname=t.HYaddress[a]);t.infodata=e.data.data,t.infodata1=e.data.data,t.infoGood=e.data.data.order_goods,t.shouldPay=(t.infodata.total_fee-t.infodata.money_paid-t.infodata.surplus-t.infodata.bonus_ship-t.infodata.bonus).toFixed(2),t.getRegion(),t.getRegion(2,e.data.data.province),t.getRegion(3,e.data.data.city)})},getRegion:function(t,e){var a=this;ke({type:t,parent_id:e}).then(function(i){200==i.code&&(2==t?(e!=a.editForm.city&&(a.editForm.city="",a.editForm.district=""),a.cOption=i.data):3==t?(e!=a.editForm.district&&(a.editForm.district=""),a.dOption=i.data):4!=t&&(a.pOption=i.data))})},goBack:function(){this.$router.go(-1)}},mounted:function(){this.getData()}},Lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"padding-top":"30px","font-size":"12px"}},[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"warning",icon:"el-icon-back"},on:{click:function(e){return t.goBack()}}},[t._v("返回")])],1)],1)],1),t._v(" "),a("div",{staticClass:"order_info",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("基本信息")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",{staticClass:"jieshi"},[t._v("订单号：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.order_sn))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("订单状态：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.o_status))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("购货人：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.consignee))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("下单时间：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.add_time))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("支付方式：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.pay_name))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("付款时间：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.pay_time))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("配送方式：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.shipping_name))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("发货时间：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.shipping_time))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("发货单号：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.invoice_no))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("订单来源：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.from_where))])])])],1),t._v(" "),a("div",{staticClass:"order_info",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("其他信息\n          ")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",{staticClass:"jieshi"},[t._v("客户备注：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.msg_to_shop))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("商家备注：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.msg_to_buyer))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("订单标签：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.label))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("订单留言：")]),t._v(" "),a("td")])])],1),t._v(" "),a("div",{staticClass:"order_info",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("收货人信息\n          ")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",{staticClass:"jieshi"},[t._v("收货人：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.consignee))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("电子邮件：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.email))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("地址：")]),t._v(" "),a("td",[t._v("【"+t._s(t.infodata.provincename)+t._s(t.infodata.cityname)+t._s(t.infodata.districtname)+"】"+t._s(t.infodata.address))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("邮编：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.zipcode))])]),t._v(" "),a("tr",[a("td",{staticClass:"jieshi"},[t._v("电话：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.phone))]),t._v(" "),a("td",{staticClass:"jieshi"},[t._v("最佳送货时间：")]),t._v(" "),a("td",[t._v(t._s(t.infodata.best_time))])])])],1),t._v(" "),a("div",{staticClass:"back_infogoods",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("商品信息\n          ")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[t._m(0),t._v(" "),t._l(t.infoGood.item,function(e){return a("tr",[a("td",[e.delivery_id?a("span",{staticStyle:{color:"red"}},[t._v("[预售]")]):t._e(),t._v(t._s(e.goods_name))]),t._v(" "),a("td",[t._v(t._s(e.goods_sn))]),t._v(" "),a("td",[t._v(t._s(e.suppliers_name))]),t._v(" "),a("td",[t._v(t._s(e.o_status))]),t._v(" "),a("td",[t._v(t._s(e.invoice))]),t._v(" "),a("td",[t._v(t._s(e.goods_attr))]),t._v(" "),a("td",[t._v(t._s(e.goods_price))]),t._v(" "),a("td",[t._v(t._s(e.goods_number))]),t._v(" "),a("td",[t._v(t._s(e.bonus))]),t._v(" "),a("td",[t._v(t._s(e.discount))]),t._v(" "),a("td",[t._v(t._s(e.stock))]),t._v(" "),a("td",[t._v(t._s(e.subprice))])])}),t._v(" "),a("tr",[a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),t._m(1),t._v(" "),a("td",[a("b",[t._v(t._s(t.infoGood.subweight)+"kg")])]),t._v(" "),a("td"),t._v(" "),t._m(2),t._v(" "),a("td",[a("b",[t._v(t._s(t.infoGood.subprice))])])])],2)],1),t._v(" "),a("div",{staticClass:"order_info",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"bg-orange"},[t._v("费用信息\n          ")])]),t._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",{staticStyle:{"text-align":"right"}},[t._v("\n              商品总积分： "+t._s(t.infodata.goods_amount)+"- 折扣："+t._s(t.infodata.discount)+"\n          ")]),t._v(" "),a("tr",{staticStyle:{"text-align":"right"}},[t._v("\n             = 订单总积分："+t._s(t.infodata.total_fee)+"\n          ")]),t._v(" "),a("tr",{staticStyle:{"text-align":"right"}},[t._v("\n             付款积分:"+t._s(t.infodata.surplus)+"\n          ")]),t._v(" "),a("tr",{staticStyle:{"text-align":"right"}})])],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("商品名称")]),t._v(" "),a("th",[t._v("货号")]),t._v(" "),a("th",[t._v("供应商")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("快递单号")]),t._v(" "),a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("价格")]),t._v(" "),a("th",[t._v("数量")]),t._v(" "),a("th",[t._v("优惠券平摊")]),t._v(" "),a("th",[t._v("折扣")]),t._v(" "),a("th",[t._v("库存")]),t._v(" "),a("th",[t._v("小计")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("商品总重量：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("合计：")])])}]};var Vt=a("VU/8")(St,Lt,!1,function(t){a("fvI9")},null,null).exports,Ct={data:function(){return{tableData:[],tableloading:!1,addFormVisible:!1,addForm:{carousel_name:"",redirect_type:1,redirect_id:"",redirect_name:"",add_time:"",end_time:"",sort:"",enabled:1,carousel_position:this.carouselPosition,carousel_type:this.carouselType,img:"",img_url:"",video_img:""},editFormVisible:!1,editForm:{},selecteOptions:[{value:0,label:"无操作"},{value:1,label:"商品详情"},{value:2,label:"分类详情"},{value:3,label:"活动详情"}],fileListVideo:[],Rules:{carousel_name:[{required:!0,message:"广告名称",trigger:"blur"},{min:0,max:15,message:"长度在 0 到 15 个字符",trigger:"blur"}],redirect_type:[{required:!0,message:"跳转类型",trigger:"change"}],redirect_id:[{required:!0,message:"跳转地址",trigger:"blur"}],redirect_name:[{required:!0,message:"跳转地址错误",trigger:"blur"}],add_time:[{required:!0,message:"开始时间",trigger:"change"}],end_time:[{required:!0,message:"结束时间",trigger:"change"}],sort:[{required:!0,message:"排序",trigger:"blur"}],enabled:[{required:!0,message:"启用",trigger:"change"}]}}},props:["carouselPosition","carouselType","desc"],methods:{validRedirect:function(t,e,a){var i=this;1==t||2==t?Ge({type:t,keywords:e}).then(function(t){200==t.code?a?i.editForm.redirect_name=t.data.name:i.addForm.redirect_name=t.data.name:a?i.editForm.redirect_name="":i.addForm.redirect_name=""}):3==t&&(a?this.editForm.redirect_name="活动":this.addForm.redirect_name="活动")},validZero:function(t,e){this.addForm.redirect_name="",this.addForm.redirect_id="",this.editForm.redirect_name="",this.editForm.redirect_id="",0==t&&(e?(this.editForm.redirect_name="无操作",this.editForm.redirect_id="无操作"):(this.addForm.redirect_name="无操作",this.addForm.redirect_id="无操作"))},getData:function(){var t=this;this.tableloading=!0,we({position:this.carouselPosition,carousel_type:this.carouselType}).then(function(e){200==e.code&&(t.tableData=e.data.item,t.tableloading=!1)})},handleAdd:function(){this.addFormVisible=!0},addSubmit:function(){var t=this;this.$refs.addForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){var e=new FormData;for(var a in t.addForm)"img"==a&&2==t.carouselPosition&&1==t.carouselType||e.append(a,t.addForm[a]);xe(e).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.$refs.addForm.resetFields(),t.addFormVisible=!1,t.getData()):t.$message({message:e.msg,type:"warning"})})})})},handleEdit:function(t){this.editFormVisible=!0,this.editForm=t,this.editForm.img=""},editSubmit:function(){var t=this,e=this;this.$refs.editForm.validate(function(a){a&&t.$confirm("确认提交吗？","提示",{}).then(function(){var a=new FormData;for(var i in t.editForm)10==e.carouselPosition?"img"!=i&&a.append(i,t.editForm[i]):"img"==i||"img_url"==i||a.append(i,t.editForm[i]);t.editForm.img.type&&a.append("img",t.editForm.img),Se(a).then(function(e){200==e.code?(t.editFormVisible=!1,t.$message({message:e.msg,type:"success"}),t.$refs.editForm.resetFields(),t.getData()):t.$message({message:e.msg,type:"warning"})})})})},changeUploadVideo:function(t,e){this.fileListVideo=e},handleExceedVideo:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},handleDel:function(t){var e=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){$e({id:t.carousel_id}).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.getData()):e.$message({message:t.msg,type:"warning"})})}).catch(function(){})}},mounted:function(){this.getData()}},Dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"carousel_name",label:"广告名称"}}),t._v(" "),2==t.carouselPosition&&1==t.carouselType||10==t.carouselPosition||14==t.carouselPosition?t._e():a("el-table-column",{attrs:{label:"图片",width:"195"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.img_url,height:"80"}})]}}],null,!1,2510049086)}),t._v(" "),10==t.carouselPosition?a("el-table-column",{attrs:{prop:"img_url",label:"园艺视频"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"redirect_type",label:"跳转类型",width:"85"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.redirect_type?a("p",[t._v("无操作")]):t._e(),t._v(" "),1==e.row.redirect_type?a("p",[t._v("商品详情")]):t._e(),t._v(" "),2==e.row.redirect_type?a("p",[t._v("分类详情")]):t._e(),t._v(" "),3==e.row.redirect_type?a("p",[t._v("活动详情")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"redirect_id",label:"跳转id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"redirect_name",label:"跳转名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"开始时间",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"end_time",label:"结束时间",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{prop:"enabled",label:"启用",width:"45"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.enabled?a("p",[t._v("否")]):t._e(),t._v(" "),1==e.row.enabled?a("p",[t._v("是")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisible},on:{"update:visible":function(e){t.addFormVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"200px",rules:t.Rules}},[a("el-form-item",{attrs:{label:"广告名称",prop:"carousel_name"}},[a("el-input",{attrs:{maxlength:"15",placeholder:"不超过15个字符"},model:{value:t.addForm.carousel_name,callback:function(e){t.$set(t.addForm,"carousel_name",e)},expression:"addForm.carousel_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转类型",prop:"redirect_type"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.validZero(t.addForm.redirect_type,0)}},model:{value:t.addForm.redirect_type,callback:function(e){t.$set(t.addForm,"redirect_type",e)},expression:"addForm.redirect_type"}},t._l(t.selecteOptions,function(e){return 15!=t.carouselPosition?a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}}):t._e()}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:1==t.addForm.redirect_type?"跳转商品":2==t.addForm.redirect_type?"跳转分类":"跳转地址",prop:"redirect_id"}},[a("el-input",{attrs:{placeholder:1==t.addForm.redirect_type?"跳转商品ID":2==t.addForm.redirect_type?"跳转分类ID":"跳转地址"},on:{blur:function(e){return t.validRedirect(t.addForm.redirect_type,t.addForm.redirect_id,0)}},model:{value:t.addForm.redirect_id,callback:function(e){t.$set(t.addForm,"redirect_id",e)},expression:"addForm.redirect_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转名称",prop:"redirect_name"}},[a("el-input",{attrs:{disabled:""},model:{value:t.addForm.redirect_name,callback:function(e){t.$set(t.addForm,"redirect_name",e)},expression:"addForm.redirect_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"add_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.addForm.add_time,callback:function(e){t.$set(t.addForm,"add_time",e)},expression:"addForm.add_time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.addForm.end_time,callback:function(e){t.$set(t.addForm,"end_time",e)},expression:"addForm.end_time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{model:{value:t.addForm.sort,callback:function(e){t.$set(t.addForm,"sort",e)},expression:"addForm.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用",prop:"enabled"}},[a("el-radio-group",{model:{value:t.addForm.enabled,callback:function(e){t.$set(t.addForm,"enabled",e)},expression:"addForm.enabled"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),2==t.carouselPosition&&1==t.carouselType||10==t.carouselPosition||14==t.carouselPosition?t._e():a("el-form-item",{attrs:{label:"图片",prop:"img"}},[a("VueImgInputer",{attrs:{theme:"light"},model:{value:t.addForm.img,callback:function(e){t.$set(t.addForm,"img",e)},expression:"addForm.img"}}),a("br"),t._v(t._s(t.desc)+"\n      ")],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"200px",rules:t.Rules}},[a("el-form-item",{attrs:{label:"广告名称",prop:"carousel_name"}},[a("el-input",{attrs:{maxlength:"15",placeholder:"不超过15个字符"},model:{value:t.editForm.carousel_name,callback:function(e){t.$set(t.editForm,"carousel_name",e)},expression:"editForm.carousel_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转类型",prop:"redirect_type"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.validZero(t.editForm.redirect_type,1)}},model:{value:t.editForm.redirect_type,callback:function(e){t.$set(t.editForm,"redirect_type",e)},expression:"editForm.redirect_type"}},t._l(t.selecteOptions,function(e){return 15!=t.carouselPosition?a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}}):t._e()}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:1==t.editForm.redirect_type?"跳转商品":2==t.editForm.redirect_type?"跳转分类":"跳转地址",prop:"redirect_id"}},[a("el-input",{attrs:{placeholder:1==t.editForm.redirect_type?"跳转商品ID":2==t.editForm.redirect_type?"跳转分类ID":"跳转地址"},on:{blur:function(e){return t.validRedirect(t.editForm.redirect_type,t.editForm.redirect_id,1)}},model:{value:t.editForm.redirect_id,callback:function(e){t.$set(t.editForm,"redirect_id",e)},expression:"editForm.redirect_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转名称",prop:"redirect_name"}},[a("el-input",{attrs:{disabled:""},model:{value:t.editForm.redirect_name,callback:function(e){t.$set(t.editForm,"redirect_name",e)},expression:"editForm.redirect_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"add_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.editForm.add_time,callback:function(e){t.$set(t.editForm,"add_time",e)},expression:"editForm.add_time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.editForm.end_time,callback:function(e){t.$set(t.editForm,"end_time",e)},expression:"editForm.end_time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{model:{value:t.editForm.sort,callback:function(e){t.$set(t.editForm,"sort",e)},expression:"editForm.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用",prop:"enabled"}},[a("el-radio-group",{model:{value:t.editForm.enabled,callback:function(e){t.$set(t.editForm,"enabled",e)},expression:"editForm.enabled"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),2==t.carouselPosition&&1==t.carouselType||10==t.carouselPosition||14==t.carouselPosition?t._e():a("el-form-item",{attrs:{label:"图片"}},[a("VueImgInputer",{attrs:{theme:"light",imgSrc:t.editForm.img_url},model:{value:t.editForm.img,callback:function(e){t.$set(t.editForm,"img",e)},expression:"editForm.img"}}),a("br"),t._v(t._s(t.desc)+"\n      ")],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]},Ot={components:{pubcarousel:a("VU/8")(Ct,Dt,!1,null,null,null).exports},data:function(){return{activeName:"first",activeName2:"one",activeName3:"three",activeName4:"five",activeName5:"seven"}}},It={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"轮播图管理",name:"first"}},[a("div",{attrs:{id:"aaa"}},["first"==t.activeName?a("pubcarousel",{attrs:{"carousel-position":"0","carousel-type":"1"}}):t._e()],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"文章中心",name:"third"}},[a("div",{attrs:{id:"ccc"}},["third"==t.activeName?a("pubcarousel",{attrs:{"carousel-position":"2","carousel-type":"1"}}):t._e()],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"品牌专区",name:"four"}},[a("div",{attrs:{id:"ddd"}},["four"==t.activeName?a("pubcarousel",{attrs:{"carousel-position":"3","carousel-type":"1",desc:"第一张图片大小为370X580,第二第三张为370X288"}}):t._e()],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"限时折扣",name:"five"}},[a("div",{attrs:{id:"eee"}},["five"==t.activeName?a("pubcarousel",{attrs:{"carousel-position":"4","carousel-type":"1"}}):t._e()],1)])],1)},staticRenderFns:[]};var Et=a("VU/8")(Ot,It,!1,function(t){a("K3pB")},null,null).exports,Nt={data:function(){return{homethemeLists:[],addFormVisible:!1,addactrangeid:[],options4:[],options5:[],options6:[],options7:[],redirect:[],loading:!1,tableloading:!1,addFormRules:{name:[{required:!0,message:"请输入",trigger:"blur"}]},addForm:{theme_name:"",theme_banner:"",redirect_type:"",redirect_id:"",redirect:{},children_goods_ids:[],children_goods_name:[],children_goods:[],sort:"",enabled:!1,children_goods_ids_id:""},editFormVisible:!1,editForm:{theme_name:"",theme_banner:"",redirect_type:"",redirect:{},redirect_id:"",redirect_name:"",children_goods_ids:[],children_goods:[],sort:"",enabled:"",children_goods_ids_id:""},addselecteOptions:[{value:1,label:"商品详情"},{value:2,label:"分类详情"},{value:3,label:"活动详情"}],addselectelabel:"商品详情",editselecteOptions:[{value:1,label:"商品详情"},{value:2,label:"分类详情"},{value:3,label:"活动详情"}],editselectetype:[{value:1,label:"商城"},{value:3,label:"门店"}],addselectetype:[{value:1,label:"商城"},{value:3,label:"门店"}],editselectelabel:"商品详情"}},computed:n()({},Object(l.c)(["getToken"])),methods:{clearall:function(){var t=this;this.$confirm("确认清除吗?","提示",{type:"warning"}).then(function(){Me({arg:"cache_index:1:*"}).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.gethomeLists()):t.$message({message:e.msg,type:"warning"})})})},addsonAdd:function(){this.addForm.children_goods.push({value:this.addForm.children_goods_ids_id.value,label:this.addForm.children_goods_ids_id.label}),this.addForm.children_goods=this.uniqeByKeys(this.addForm.children_goods,["value"])},addsonDelete:function(t,e){e.splice(t,1)},editsonAdd:function(){this.editForm.children_goods.push({value:this.editForm.children_goods_ids_id.value,label:this.editForm.children_goods_ids_id.label}),this.editForm.children_goods=this.uniqeByKeys(this.editForm.children_goods,["value"])},addremoteMethod:function(t){var e=this;this.options4=[],""!==t?(this.loading=!0,setTimeout(function(){if(1==e.addForm.redirect_type)Pe({presale:1,type:3,keywords:t}).then(function(t){if(200==t.data.code)for(var a in t.data.data){var i={value:t.data.data[a].id,label:t.data.data[a].name};e.options4.push(i),e.loading=!1}});else if(2==e.addForm.redirect_type){Pe({type:1,keywords:t}).then(function(t){if(e.options4=[],200==t.data.code)for(var a in t.data.data){var i={value:t.data.data[a].cat_id,label:t.data.data[a].cat_name};e.options4.push(i),e.loading=!1}})}},200)):this.options4=[]},editremoteMethod2:function(t){var e=this;this.options5=[],""!==t?(this.loading=!0,setTimeout(function(){Pe({presale:1,type:3,keywords:t}).then(function(t){if(200==t.data.code)for(var a in e.options5=[],t.data.data){var i={value:t.data.data[a].id,label:t.data.data[a].name};e.options5.push(i),e.loading=!1}})},200)):this.options4=[]},addremoteMethod2:function(t){var e=this;this.options5=[],""!==t?(this.loading=!0,setTimeout(function(){Pe({presale:1,type:3,keywords:t}).then(function(t){if(200==t.data.code)for(var a in e.options5=[],t.data.data){var i={value:t.data.data[a].id,label:t.data.data[a].name};e.options5.push(i),e.loading=!1}})},200)):this.options4=[]},editremoteMethod:function(t){var e=this;this.options6=[],""!==t?(this.loading=!0,setTimeout(function(){if(console.log(t),console.log(e.editForm.redirect_type),1==e.editForm.redirect_type||"商品详情"==e.editForm.redirect_type)Pe({type:3,keywords:t}).then(function(t){if(200==t.data.code)for(var a in t.data.data){var i={value:t.data.data[a].shp_id,label:t.data.data[a].name};e.options6.push(i),e.loading=!1}});else if(2==e.editForm.redirect_type||"分类详情"==e.editForm.redirect_type){Pe({type:1,keywords:t}).then(function(t){if(e.options6=[],200==t.data.code)for(var a in t.data.data){var i={value:t.data.data[a].cat_id,label:t.data.data[a].cat_name};e.options6.push(i),e.loading=!1}})}},200)):this.options6=[]},editclear:function(){console.log(1)},gethomeLists:function(){var t=this,e=[];this.tableloading=!0,Ne().then(function(a){if(200==a.data.code){for(var i in t.tableloading=!1,a.data.data.item)e.push(a.data.data.item[i]);for(var i in e)1==e[i].redirect_type?e[i].redirect_type="商品详情":2==e[i].redirect_type?e[i].redirect_type="分类详情":e[i].redirect_type="活动详情",1==e[i].enabled?e[i].enabled="是":e[i].enabled="否";t.homethemeLists=e}})},handleAdd:function(){this.addFormVisible=!0},addSubmit:function(){var t=this,e=this;this.$refs.addForm.validate(function(a){a&&t.$confirm("确认提交吗？","提示",{}).then(function(){var a=new FormData;for(var i in 1==t.addForm.enabled?t.addForm.enabled=1:t.addForm.enabled=0,3==t.addForm.redirect_type?(a.append("redirect_id",t.addForm.redirect_id),a.append("redirect_name","")):(a.append("redirect_id",t.addForm.redirect.value),a.append("redirect_name",t.addForm.redirect.label)),t.addForm.children_goods_ids=[],t.addForm.children_goods_name=[],t.addForm.children_goods)t.addForm.children_goods_ids.push(t.addForm.children_goods[i].value),t.addForm.children_goods_name.push(t.addForm.children_goods[i].label);a.append("enabled",t.addForm.enabled),a.append("img",t.addForm.img),a.append("theme_name",t.addForm.theme_name),a.append("redirect_type",t.addForm.redirect_type),a.append("carousel_type",1),a.append("children_goods_id",t.addForm.children_goods_ids),a.append("children_goods_name",t.addForm.children_goods_name),a.append("sort",t.addForm.sort),Ie(a).then(function(t){200==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.gethomeLists()):e.$message({message:t.data.msg,type:"warning"})})})})},handleEdit:function(t){this.editFormVisible=!0,"是"==t.enabled?t.enabled=!0:t.enabled=!1,"商品详情"==t.redirect_type?t.redirect_type=1:"分类详情"==t.redirect_type?t.redirect_type=2:t.redirect_type=3,console.log(t.children_goods_name.split(",")),t.children_goods_name&&(t.children_goods_name=t.children_goods_name.split(","),t.children_goods_id=t.children_goods_id.split(","));var e=[];for(var a in t.children_goods_name)e.push({value:t.children_goods_id[a],label:t.children_goods_name[a]});this.editForm={id:t.t_id,theme_name:t.theme_name,theme_banner:t.theme_banner,redirect_type:t.redirect_type,redirect:{value:t.redirect_id,label:t.redirect_name},redirect_id:t.redirect_id,children_goods_ids:t.children_goods_id,children_goods:e,sort:t.sort,enabled:t.enabled,children_goods_ids_id:""},3==this.editForm.redirect_type?this.editForm.redirect={}:(this.editForm.redirect={value:t.redirect_id,label:t.redirect_name},this.options6[0]=this.editForm.redirect)},editSubmit:function(){var t=this;this.$refs.editForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){var e=t,a=new FormData;for(var i in 1==t.editForm.enabled?t.editForm.enabled=1:t.editForm.enabled=0,a.append("t_id",t.editForm.id),a.append("enabled",t.editForm.enabled),t.editForm.img&&a.append("img",t.editForm.img),a.append("theme_name",t.editForm.theme_name),a.append("redirect_type",t.editForm.redirect_type),3==t.editForm.redirect_type?(a.append("redirect_id",t.editForm.redirect_id),a.append("redirect_name","")):(a.append("redirect_id",t.editForm.redirect.value),a.append("redirect_name",t.editForm.redirect.label)),console.log(t.editForm.children_goods),t.editForm.children_goods_ids=[],t.editForm.children_goods_name=[],t.editForm.children_goods)t.editForm.children_goods_ids.push(t.editForm.children_goods[i].value),t.editForm.children_goods_name.push(t.editForm.children_goods[i].label);console.log(t.editForm.children_goods_ids),a.append("children_goods_id",t.editForm.children_goods_ids),a.append("children_goods_name",t.editForm.children_goods_name),a.append("carousel_type",1),a.append("sort",t.editForm.sort),t.editForm.img&&a.append("img",t.editForm.img),Ee(a).then(function(t){200==t.data.code?(e.editFormVisible=!1,e.$message({message:t.data.msg,type:"success"})):e.$message({message:t.data.msg,type:"warning"})})})})},handleDel:function(t){var e=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){var a={id:t.t_id};Ae(a).then(function(t){200==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.gethomeLists()):e.$message({message:t.data.msg,type:"warning"})})}).catch(function(){})},addidchange:function(){this.addForm.redirect={}},editidchange:function(){this.editForm.redirect={}}},watch:{editFormVisible:function(t,e){t||this.gethomeLists()},addFormVisible:function(t,e){t||(this.options4=[],this.options5=[],this.addForm={theme_name:"",theme_banner:"",redirect_type:"",redirect_id:"",children_goods_ids:[],children_goods:[],sort:"",enabled:!1,children_goods_ids_id:""})}},mounted:function(){this.gethomeLists()}},At={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"danger"},on:{click:t.clearall}},[t._v("清除首页缓存")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.homethemeLists,border:""}},[a("el-table-column",{attrs:{prop:"theme_name",label:"主题名称",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.theme_banner,width:"150",height:"80"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"redirect_type",label:"跳转类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"redirect_name",label:"跳转名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"redirect_id",label:"跳转ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"children_goods_name",label:"子类名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序"}}),t._v(" "),a("el-table-column",{attrs:{prop:"enabled",label:"启用"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisible},on:{"update:visible":function(e){t.addFormVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"200px",rules:t.addFormRules}},[a("el-form-item",{attrs:{label:"主题名称"}},[a("el-input",{model:{value:t.addForm.theme_name,callback:function(e){t.$set(t.addForm,"theme_name",e)},expression:"addForm.theme_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转类型"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.addidchange},model:{value:t.addForm.redirect_type,callback:function(e){t.$set(t.addForm,"redirect_type",e)},expression:"addForm.redirect_type"}},t._l(t.addselecteOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:1==t.addForm.redirect_type?"跳转商品":2==t.addForm.redirect_type?"跳转分类":"跳转链接"}},[1==t.addForm.redirect_type||2==t.addForm.redirect_type?a("el-select",{attrs:{filterable:"",remote:"",placeholder:1==t.addForm.redirect_type?"请输入商品关键词":"请输入分类关键词","remote-method":t.addremoteMethod,loading:t.loading},model:{value:t.addForm.redirect,callback:function(e){t.$set(t.addForm,"redirect",e)},expression:"addForm.redirect"}},t._l(t.options4,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t}})}),1):t._e(),t._v(" "),3==t.addForm.redirect_type?a("el-input",{model:{value:t.addForm.redirect_id,callback:function(e){t.$set(t.addForm,"redirect_id",e)},expression:"addForm.redirect_id"}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"子类名称"}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"请输入商品关键词","remote-method":t.addremoteMethod2,loading:t.loading},model:{value:t.addForm.children_goods_ids_id,callback:function(e){t.$set(t.addForm,"children_goods_ids_id",e)},expression:"addForm.children_goods_ids_id"}},t._l(t.options5,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addsonAdd}},[t._v("新增")])],1),t._v(" "),a("el-form-item",{attrs:{label:"子类名称"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.addForm.children_goods,stripe:""}},[a("el-table-column",{attrs:{prop:"value",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"label",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.addsonDelete(e.$index,t.addForm.children_goods)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.addForm.sort,callback:function(e){t.$set(t.addForm,"sort",e)},expression:"addForm.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949"},model:{value:t.addForm.enabled,callback:function(e){t.$set(t.addForm,"enabled",e)},expression:"addForm.enabled"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片"}},[a("VueImgInputer",{attrs:{theme:"light"},model:{value:t.addForm.img,callback:function(e){t.$set(t.addForm,"img",e)},expression:"addForm.img"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"主题名称"}},[a("el-input",{model:{value:t.editForm.theme_name,callback:function(e){t.$set(t.editForm,"theme_name",e)},expression:"editForm.theme_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转类型"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.editidchange},model:{value:t.editForm.redirect_type,callback:function(e){t.$set(t.editForm,"redirect_type",e)},expression:"editForm.redirect_type"}},t._l(t.editselecteOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:1==t.editForm.redirect_type?"跳转商品":2==t.editForm.redirect_type?"跳转分类":"跳转链接"}},[1==t.editForm.redirect_type||2==t.editForm.redirect_type?a("el-select",{attrs:{filterable:"",remote:"",placeholder:1==t.editForm.redirect_type?"请输入商品关键词":"请输入分类关键词","remote-method":t.editremoteMethod,loading:t.loading},model:{value:t.editForm.redirect,callback:function(e){t.$set(t.editForm,"redirect",e)},expression:"editForm.redirect"}},t._l(t.options6,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t}})}),1):t._e(),t._v(" "),3==t.editForm.redirect_type?a("el-input",{model:{value:t.editForm.redirect_id,callback:function(e){t.$set(t.editForm,"redirect_id",e)},expression:"editForm.redirect_id"}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"子类名称"}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"请输入商品关键词","remote-method":t.editremoteMethod2,loading:t.loading},model:{value:t.editForm.children_goods_ids_id,callback:function(e){t.$set(t.editForm,"children_goods_ids_id",e)},expression:"editForm.children_goods_ids_id"}},t._l(t.options5,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editsonAdd}},[t._v("新增")])],1),t._v(" "),a("el-form-item",{attrs:{label:"子类名称"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.editForm.children_goods,stripe:""}},[a("el-table-column",{attrs:{prop:"value",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"label",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.addsonDelete(e.$index,t.editForm.children_goods)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.editForm.sort,callback:function(e){t.$set(t.editForm,"sort",e)},expression:"editForm.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949"},model:{value:t.editForm.enabled,callback:function(e){t.$set(t.editForm,"enabled",e)},expression:"editForm.enabled"}})],1),t._v(" "),a("div",{staticClass:"editimages"},[a("el-form-item",{attrs:{label:"图片"}},[a("VueImgInputer",{attrs:{theme:"light",imgSrc:t.editForm.theme_banner},model:{value:t.editForm.img,callback:function(e){t.$set(t.editForm,"img",e)},expression:"editForm.img"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var Rt=a("VU/8")(Nt,At,!1,function(t){a("ZsaA")},null,null).exports,zt={data:function(){return{tableloading:!0,tableData:[],addFormVisible:!1,editFormVisible:!1,Rules:{redirect_id:[{required:!0,message:"请输入跳转",trigger:"blur"}],redirect_name:[{required:!0,message:"跳转ID错误",trigger:"blur"}],n_name:[{required:!0,message:"输入导航名称",trigger:"blur"}],sort:[{required:!0,message:"排序",trigger:"blur"}],enabled:[{required:!0,message:"启用",trigger:"change"}],redirect_type:[{required:!0,message:"跳转类型",trigger:"change"}]},addForm:{n_name:"",redirect_type:1,redirect_id:"",redirect_name:"",sort:1,enabled:1},editForm:{},selecteOptions:[{value:1,label:"商品详情"},{value:2,label:"分类详情"},{value:3,label:"活动详情"}]}},methods:{validRedirect:function(t,e,a){var i=this;1==t||2==t?Ge({type:t,keywords:e}).then(function(t){200==t.code?a?i.editForm.redirect_name=t.data.name:i.addForm.redirect_name=t.data.name:a?i.editForm.redirect_name="":i.addForm.redirect_name=""}):3==t&&(a?this.editForm.redirect_name="活动":this.addForm.redirect_name="活动")},getnavLists:function(){var t=this;this.tableloading=!0,De().then(function(e){200==e.code&&(t.tableData=e.data.item,t.tableloading=!1)})},handleAdd:function(){this.addFormVisible=!0},addSubmit:function(){var t=this;this.$refs.addForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){Ve(t.addForm).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.$refs.addForm.resetFields(),t.addFormVisible=!1,t.getnavLists()):t.$message({message:e.msg,type:"warning"})})})})},handleEdit:function(t){this.editFormVisible=!0,this.editForm=t},editSubmit:function(){var t=this,e=this;this.$refs.editForm.validate(function(a){a&&t.$confirm("确认提交吗？","提示",{}).then(function(){Ce(t.editForm).then(function(a){200==a.code?(e.$message({message:a.msg,type:"success"}),e.editFormVisible=!1,t.$refs.editForm.resetFields(),t.getnavLists()):e.$message({message:a.msg,type:"warning"})})})})},handleDel:function(t){var e=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){Oe({id:t.n_id}).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.getnavLists()):e.$message({message:t.msg,type:"warning"})})})}},mounted:function(){this.getnavLists()}},jt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"n_name",label:"导航名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"redirect_type",label:"跳转类型",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.redirect_type?a("p",[t._v("商品详情")]):t._e(),t._v(" "),2==e.row.redirect_type?a("p",[t._v("分类详情")]):t._e(),t._v(" "),3==e.row.redirect_type?a("p",[t._v("活动详情")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"redirect_id",label:"跳转地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"redirect_name",label:"跳转名称",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"enabled",label:"启用","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.enabled?a("p",[t._v("是")]):t._e(),t._v(" "),0==e.row.enabled?a("p",[t._v("否")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDel(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisible},on:{"update:visible":function(e){t.addFormVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"200px",rules:t.Rules}},[a("el-form-item",{attrs:{label:"导航名称",prop:"n_name"}},[a("el-input",{model:{value:t.addForm.n_name,callback:function(e){t.$set(t.addForm,"n_name",e)},expression:"addForm.n_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转类型",prop:"redirect_type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addForm.redirect_type,callback:function(e){t.$set(t.addForm,"redirect_type",e)},expression:"addForm.redirect_type"}},t._l(t.selecteOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:1==t.addForm.redirect_type?"跳转商品":2==t.addForm.redirect_type?"跳转分类":"跳转地址",prop:"redirect_id"}},[a("el-input",{attrs:{placeholder:1==t.addForm.redirect_type?"跳转商品ID":2==t.addForm.redirect_type?"跳转分类ID":"跳转地址"},on:{blur:function(e){return t.validRedirect(t.addForm.redirect_type,t.addForm.redirect_id,0)}},model:{value:t.addForm.redirect_id,callback:function(e){t.$set(t.addForm,"redirect_id",e)},expression:"addForm.redirect_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转名称",prop:"redirect_name"}},[a("el-input",{attrs:{disabled:""},model:{value:t.addForm.redirect_name,callback:function(e){t.$set(t.addForm,"redirect_name",e)},expression:"addForm.redirect_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{model:{value:t.addForm.sort,callback:function(e){t.$set(t.addForm,"sort",e)},expression:"addForm.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用",prop:"enabled"}},[a("el-radio-group",{model:{value:t.addForm.enabled,callback:function(e){t.$set(t.addForm,"enabled",e)},expression:"addForm.enabled"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"200px",rules:t.Rules}},[a("el-form-item",{attrs:{label:"导航名称",prop:"n_name"}},[a("el-input",{model:{value:t.editForm.n_name,callback:function(e){t.$set(t.editForm,"n_name",e)},expression:"editForm.n_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转类型",prop:"redirect_type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editForm.redirect_type,callback:function(e){t.$set(t.editForm,"redirect_type",e)},expression:"editForm.redirect_type"}},t._l(t.selecteOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:1==t.editForm.redirect_type?"跳转商品":2==t.editForm.redirect_type?"跳转分类":"跳转地址",prop:"redirect_id"}},[a("el-input",{attrs:{placeholder:1==t.editForm.redirect_type?"跳转商品ID":2==t.editForm.redirect_type?"跳转分类ID":"跳转地址"},on:{blur:function(e){return t.validRedirect(t.editForm.redirect_type,t.editForm.redirect_id,1)}},model:{value:t.editForm.redirect_id,callback:function(e){t.$set(t.editForm,"redirect_id",e)},expression:"editForm.redirect_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转名称",prop:"redirect_name"}},[a("el-input",{attrs:{disabled:""},model:{value:t.editForm.redirect_name,callback:function(e){t.$set(t.editForm,"redirect_name",e)},expression:"editForm.redirect_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{model:{value:t.editForm.sort,callback:function(e){t.$set(t.editForm,"sort",e)},expression:"editForm.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"启用",prop:"enabled"}},[a("el-radio-group",{model:{value:t.editForm.enabled,callback:function(e){t.$set(t.editForm,"enabled",e)},expression:"editForm.enabled"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]},Tt=a("VU/8")(zt,jt,!1,null,null,null).exports,Mt=a("lHA8"),Ht=a.n(Mt),qt=a("c/Tr"),Pt=a.n(qt),Gt=a("bOdI"),Ut=a.n(Gt),Yt={data:function(){var t;return t={isIndeterminate:!0,checkAll:!0,checkedprivil:[],activeName:"first",privilegedata:[],tableloading:!0,addFormVisible:!1,keywords:"",addForm:{user_name:"",password:"",repassword:""},editFormVisible:!1},Ut()(t,"keywords",""),Ut()(t,"editForm",{user_id:"",user_name:"",password:"",repassword:""}),Ut()(t,"formLabeldata",[]),Ut()(t,"editQX",{id:""}),Ut()(t,"qxVisible",!1),t},methods:{getPrivigeLists:function(){var t=this;Ue().then(function(e){if(200==e.data.code)for(var a in t.privilegedata=[],t.tableloading=!1,e.data.data.item)(e.data.data.item[a].user_name.indexOf(t.keywords)>=0||""==t.keywords)&&t.privilegedata.push(e.data.data.item[a])})},apsearch:function(){this.getPrivigeLists()},handleAdd:function(){this.addFormVisible=!0},handleEdit:function(t){this.editFormVisible=!0,this.editForm.user_id=t.user_id},addsubmit:function(){var t=this,e={user_name:this.addForm.user_name,password:this.addForm.password,repassword:this.addForm.repassword};Ye(e).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.getPrivigeLists(),t.addFormVisible=!1):t.$message({message:e.msg,type:"warning"})})},editsubmit:function(){var t=this;Ke(this.editForm).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.getPrivigeLists(),t.editFormVisible=!1):t.$message({message:e.msg,type:"warning"})})},getInfo:function(t){var e=this;Je({user_id:t.user_id}).then(function(a){if(200==a.data.code){for(var i in e.formLabeldata=a.data.data,e.formLabeldata)for(var r in e.formLabeldata[i].child)e.formLabeldata[i].child[r].connect&&e.checkedprivil.push(e.formLabeldata[i].child[r]);e.qxVisible=!0,e.editQX.id=t.user_id}})},handleCheckAllChange:function(t){for(var e in t.child)event.target.checked?(t.connect=1,t.child[e].connect=1):(t.connect=0,t.child[e].connect=0)},checkChange:function(t,e){for(var a in event.target.checked?e.connect=1:e.connect=0,t.child){if(0==t.child[a].connect)return t.connect=0,!1;t.connect=1}},privilsubmit:function(){var t=this,e=[];for(var a in this.formLabeldata)for(var i in this.formLabeldata[a].child)1==this.formLabeldata[a].child[i].connect&&(e.push(this.formLabeldata[a].child[i].rule_id),e.push(this.formLabeldata[a].rule_id));e=function(t){return Pt()(new Ht.a(t))}(e),Be({node_list:e.toString(),user_id:this.editQX.id}).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.getPrivigeLists(),t.qxVisible=!1):t.$message({message:e.msg,type:"warning"})})}},mounted:function(){this.getPrivigeLists()},watch:{addFormVisible:function(t,e){t||this.$refs.addForm.resetFields()},editFormVisible:function(t,e){t||this.$refs.editForm.resetFields()}}},Bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",{staticStyle:{float:"left","margin-right":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),a("div",{staticStyle:{float:"left","margin-right":"10px"}},[a("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.apsearch()}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1),t._v(" "),a("div",{staticStyle:{float:"left","margin-right":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.apsearch()}}},[t._v("搜索")])],1)])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.privilegedata}},[a("el-table-column",{attrs:{prop:"user_name",label:"管理员名称",width:"180",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"加入时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"last_login",label:"最后登录时间"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.can_modify?a("el-button",{on:{click:function(a){return t.getInfo(e.row)}}},[t._v("权限")]):t._e(),t._v(" "),1==e.row.can_modify?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("修改密码")]):t._e()]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisible},on:{"update:visible":function(e){t.addFormVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"管理员名称",prop:"user_name"}},[a("el-input",{model:{value:t.addForm.user_name,callback:function(e){t.$set(t.addForm,"user_name",e)},expression:"addForm.user_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.addForm.password,callback:function(e){t.$set(t.addForm,"password",e)},expression:"addForm.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"repassword"}},[a("el-input",{attrs:{type:"password"},model:{value:t.addForm.repassword,callback:function(e){t.$set(t.addForm,"repassword",e)},expression:"addForm.repassword"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addsubmit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.editForm.password,callback:function(e){t.$set(t.editForm,"password",e)},expression:"editForm.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"repassword"}},[a("el-input",{attrs:{type:"password"},model:{value:t.editForm.repassword,callback:function(e){t.$set(t.editForm,"repassword",e)},expression:"editForm.repassword"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editsubmit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"权限管理",visible:t.qxVisible,height:"800px"},on:{"update:visible":function(e){t.qxVisible=e}}},[a("div"),t._v(" "),t._l(t.formLabeldata,function(e){return a("div",{staticStyle:{margin:"15px 0",overflow:"hidden"}},[a("div",{staticStyle:{margin:"15px 0 0 5px",float:"left"}},[a("label",[a("input",{staticStyle:{zoom:"140%",float:"left"},attrs:{type:"checkbox"},domProps:{checked:1==e.connect,value:e},on:{change:function(a){return t.handleCheckAllChange(e)}}}),t._v(" "),a("h4",{staticStyle:{display:"inline-block",float:"left",margin:"0"}},[t._v(t._s(e.title))])])]),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{margin:"15px 0 0 5px",float:"left",width:"100%"}},t._l(e.child,function(i){return a("label",{staticStyle:{"margin-right":"15px"}},[a("input",{staticStyle:{zoom:"120%"},attrs:{type:"checkbox"},domProps:{checked:1==i.connect,value:i},on:{change:function(a){return t.checkChange(e,i)}}}),t._v(t._s(i.title))])}),0)])}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.qxVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.privilsubmit}},[t._v("确 定")])],1)],2)],1)},staticRenderFns:[]},Jt=a("VU/8")(Yt,Bt,!1,null,null,null).exports,Kt={data:function(){return{tableData:[],page:1,pagecount:1,tableloading:!0,addFormVisible:!1,addForm:{name:"",level:"",discount:"",first_reback_rate:"",second_reback_rate:"",third_reback_rate:"",capping_rate:"",capping_price:"",achievement_award:"",recommend_award:""},editForm:{name:"",level:"",discount:"",first_reback_rate:"",second_reback_rate:"",third_reback_rate:"",capping_rate:"",capping_price:"",achievement_award:"",recommend_award:""},editFormVisible:!1}},methods:{getData:function(){var t=this;this.tableloading=!0,Ta({page:this.page}).then(function(e){200==e.code&&(t.pagecount=e.data.pagecount,t.tableData=e.data.list,t.tableloading=!1)})},handleCurrentChange:function(t){this.page=t,this.getData()},handleAdd:function(){this.addFormVisible=!0},addSubmit:function(){var t=this,e=this;this.$refs.addForm.validate(function(a){a&&t.$confirm("确认提交吗？","提示",{}).then(function(){Ma(t.addForm).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.addFormVisible=!1,e.getData()):e.$message({message:t.msg,type:"warning"})})})})},handleEdit:function(t){this.editForm=t,this.editFormVisible=!0},editSubmit:function(){var t=this,e=this;this.$confirm("确认提交吗？","提示",{}).then(function(){Ha(t.editForm).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.editFormVisible=!1,e.getData()):e.$message({message:t.msg,type:"warning"})})})}},mounted:function(){this.getData()},watch:{addFormVisible:function(t,e){t||this.$refs.addForm.resetFields()},editFormVisible:function(t,e){t||this.$refs.editForm.resetFields()}}},Xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"name",label:"会员等级名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"level",label:"会员等级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"会员折扣"}}),t._v(" "),a("el-table-column",{attrs:{prop:"first_reback_rate",label:"向上级返佣比例"}}),t._v(" "),a("el-table-column",{attrs:{prop:"second_reback_rate",label:"向上上级返佣比例"}}),t._v(" "),a("el-table-column",{attrs:{prop:"third_reback_rate",label:"向上上上级返佣比例"}}),t._v(" "),a("el-table-column",{attrs:{prop:"capping_rate",label:"业绩奖比例"}}),t._v(" "),a("el-table-column",{attrs:{prop:"capping_price",label:"业绩封顶金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"achievement_award",label:"终身成就奖/月"}}),t._v(" "),a("el-table-column",{attrs:{prop:"recommend_award",label:"推荐同级奖励"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-count":t.pagecount},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisible},on:{"update:visible":function(e){t.addFormVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"会员等级名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"会员等级",prop:"level"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.level,callback:function(e){t.$set(t.addForm,"level",e)},expression:"addForm.level"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"会员折扣",prop:"discount"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.discount,callback:function(e){t.$set(t.addForm,"discount",e)},expression:"addForm.discount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"向上级返佣比例",prop:"first_reback_rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.first_reback_rate,callback:function(e){t.$set(t.addForm,"first_reback_rate",e)},expression:"addForm.first_reback_rate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"向上上级返佣比例",prop:"second_reback_rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.second_reback_rate,callback:function(e){t.$set(t.addForm,"second_reback_rate",e)},expression:"addForm.second_reback_rate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"向上上上级返佣比例",prop:"third_reback_rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.third_reback_rate,callback:function(e){t.$set(t.addForm,"third_reback_rate",e)},expression:"addForm.third_reback_rate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"业绩奖比例",prop:"capping_rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.capping_rate,callback:function(e){t.$set(t.addForm,"capping_rate",e)},expression:"addForm.capping_rate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"业绩封顶金额",prop:"capping_price"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.capping_price,callback:function(e){t.$set(t.addForm,"capping_price",e)},expression:"addForm.capping_price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"终身成就奖/月",prop:"achievement_award"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.achievement_award,callback:function(e){t.$set(t.addForm,"achievement_award",e)},expression:"addForm.achievement_award"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"推荐同级奖励",prop:"recommend_award"}},[a("el-input",{attrs:{type:"text"},model:{value:t.addForm.recommend_award,callback:function(e){t.$set(t.addForm,"recommend_award",e)},expression:"addForm.recommend_award"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"会员等级名称",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"会员等级",prop:"level"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.level,callback:function(e){t.$set(t.editForm,"level",e)},expression:"editForm.level"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"会员折扣",prop:"discount"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.discount,callback:function(e){t.$set(t.editForm,"discount",e)},expression:"editForm.discount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"向上级返佣比例",prop:"first_reback_rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.first_reback_rate,callback:function(e){t.$set(t.editForm,"first_reback_rate",e)},expression:"editForm.first_reback_rate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"向上上级返佣比例",prop:"second_reback_rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.second_reback_rate,callback:function(e){t.$set(t.editForm,"second_reback_rate",e)},expression:"editForm.second_reback_rate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"向上上上级返佣比例",prop:"third_reback_rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.third_reback_rate,callback:function(e){t.$set(t.editForm,"third_reback_rate",e)},expression:"editForm.third_reback_rate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"业绩奖比例",prop:"capping_rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.capping_rate,callback:function(e){t.$set(t.editForm,"capping_rate",e)},expression:"editForm.capping_rate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"业绩封顶金额",prop:"capping_price"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.capping_price,callback:function(e){t.$set(t.editForm,"capping_price",e)},expression:"editForm.capping_price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"终身成就奖/月",prop:"achievement_award"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.achievement_award,callback:function(e){t.$set(t.editForm,"achievement_award",e)},expression:"editForm.achievement_award"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"推荐同级奖励",prop:"recommend_award"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.recommend_award,callback:function(e){t.$set(t.editForm,"recommend_award",e)},expression:"editForm.recommend_award"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]},Zt=a("VU/8")(Kt,Xt,!1,null,null,null).exports,Qt={data:function(){return{memberData:[],user_name:"",is_vip:"-1",pagecount:1,count:1,page:1,pagesize:15,tableloading:!1,moneyForm:{money:"",user_id:0},moneyFormVisible:!1,logpagecount:1,logcount:1,logpage:1,logpagesize:100,moneylogFormVisible:!1,logData:[],tablelogloading:!1,logdia:{},thankfulVisible:!1,thankful:{user_id:"",money:"",send_money:""}}},methods:{getMember:function(){var t=this,e={};e.page=this.page,e.limit=this.pagesize,this.user_name&&(e.user_name=this.user_name),"-1"!=this.is_vip&&(e.is_vip=this.is_vip),this.tableloading=!0,Na(e).then(function(e){200==e.data.code&&(t.tableloading=!1,t.memberData=e.data.data.list,t.pagecount=e.data.data.pagecount,t.count=e.data.data.count)})},handleCurrentChange:function(t){this.page=t,this.getMember()},handleSizeChange:function(t){this.pagesize=t,this.getMember()},handlelogCurrentChange:function(t){this.logpage=t,this.getlogData(this.logdia)},handlelogSizeChange:function(t){this.logpagesize=t,this.getlogData(this.logdia)},handlemoneyEdit:function(t){this.moneyFormVisible=!0,this.moneyForm.user_id=t.user_id},editmoneySubmit:function(){var t=this,e=this;this.$confirm("确认提交吗？","提示",{}).then(function(){Aa(t.moneyForm).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.moneyFormVisible=!1,e.getMember()):e.$message({message:t.msg,type:"warning"})})})},handlemoneyInfo:function(t){this.moneylogFormVisible=!0,this.logData=[],this.logdia=t,this.getlogData(this.logdia)},handlethankfulEdit:function(t){var e=this;this.thankful={user_id:"",money:"",send_money:""},this.thankful.user_id=t.user_id,za(t).then(function(t){200==t.code&&(e.thankfulVisible=!0,t.data.info&&(e.thankful.money=t.data.info.money,e.thankful.send_money=t.data.info.send_money))})},editthankfulSubmit:function(){var t=this,e=this;this.$confirm("确认提交吗？","提示",{}).then(function(){ja(t.thankful).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.thankfulVisible=!1):e.$message({message:t.msg,type:"warning"})})})},getlogData:function(t){var e=this;Ra({user_id:t.user_id,limit:this.logpagesize,page:this.logpage}).then(function(t){200==t.code&&(e.tablelogloading=!1,e.logData=t.data.list)})}},mounted:function(){this.getMember()},watch:{moneyFormVisible:function(t,e){t||this.$refs.moneyForm.resetFields()},thankfulVisible:function(t,e){t||this.$refs.thankful.resetFields()}}},Wt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"用户名"}},[a("div",{staticStyle:{float:"left","margin-right":"10px"}},[a("el-input",{attrs:{placeholder:"输入用户名搜索"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getMember()}},model:{value:t.user_name,callback:function(e){t.user_name=e},expression:"user_name"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"是否是会员"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.is_vip,callback:function(e){t.is_vip=e},expression:"is_vip"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),t._v(" "),a("el-option",{attrs:{label:"否",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"是",value:"1"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getMember()}}},[t._v("搜索")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.memberData,border:""}},[a("el-table-column",{attrs:{prop:"vip_code",label:"会员ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nick",label:"昵称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("h4",[t._v(t._s(""!=e.row.user_name?e.row.user_name:"无用户名"))]),t._v(" "),e.row.is_vip?a("p",{staticStyle:{color:"red"}},[t._v(t._s(e.row.vip_setting_name))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"user_money",label:"积分"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prize_money",label:"奖励金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reg_time",label:"注册时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-view"},on:{click:function(a){return t.handlemoneyInfo(e.row)}}},[t._v("积分日志")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.handlemoneyEdit(e.row)}}},[t._v("下发积分")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.handlethankfulEdit(e.row)}}},[t._v("感恩红包")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{"page-sizes":[15,50,100,200],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"感恩红包",visible:t.thankfulVisible},on:{"update:visible":function(e){t.thankfulVisible=e}}},[a("el-form",{ref:"thankful",attrs:{model:t.thankful,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"金额",prop:"money"}},[a("el-input",{attrs:{type:"text"},model:{value:t.thankful.money,callback:function(e){t.$set(t.thankful,"money",e)},expression:"thankful.money"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"已发放积分",prop:"send_money"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:t.thankful.send_money,callback:function(e){t.$set(t.thankful,"send_money",e)},expression:"thankful.send_money"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.thankfulVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editthankfulSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"下发积分",visible:t.moneyFormVisible},on:{"update:visible":function(e){t.moneyFormVisible=e}}},[a("el-form",{ref:"moneyForm",attrs:{model:t.moneyForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"积分数",prop:"money"}},[a("el-input",{attrs:{type:"text"},model:{value:t.moneyForm.money,callback:function(e){t.$set(t.moneyForm,"money",e)},expression:"moneyForm.money"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.moneyFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editmoneySubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"下发积分详情",visible:t.moneylogFormVisible},on:{"update:visible":function(e){t.moneylogFormVisible=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tablelogloading,expression:"tablelogloading"}],attrs:{data:t.logData,border:""}},[a("el-table-column",{attrs:{prop:"change_type_name",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"change_desc",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_time",label:"时间"}})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{"page-sizes":[100,200],"page-size":t.logpagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.logcount},on:{"size-change":t.handlelogSizeChange,"current-change":t.handlelogCurrentChange}})],1)],1)],1)},staticRenderFns:[]},te=a("VU/8")(Qt,Wt,!1,null,null,null).exports,ee={data:function(){return{tableData:[],tableloading:!0}},methods:{getData:function(){var t=this;this.tableloading=!0,qa().then(function(e){200==e.code&&(t.tableData=e.data.collection,t.tableloading=!1)})},load:function(t,e,a){console.log(e),Pa({down_user_id:t.user_id}).then(function(t){200==t.code&&a(t.data.collection)})}},mounted:function(){this.getData()}},ae={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[e("el-form",{attrs:{inline:!0}},[e("el-form-item")],1)],1),this._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:this.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:this.tableData,border:"","element-loading-text":"拼命加载中","row-key":"user_id",lazy:"",load:this.load,"tree-props":{children:"children",hasChildren:"user_id"}}},[e("el-table-column",{attrs:{prop:"vip_code",label:"会员ID"}}),this._v(" "),e("el-table-column",{attrs:{prop:"user_name",label:"用户名"}}),this._v(" "),e("el-table-column",{attrs:{prop:"vip_setting_name",label:"会员等级名称"}})],1)],1)},staticRenderFns:[]},ie=a("VU/8")(ee,ae,!1,null,null,null).exports,re={data:function(){return{tableData:[],page:1,pagecount:1,tableloading:!0}},methods:{getData:function(){var t=this;this.tableloading=!0,Ga({page:this.page}).then(function(e){200==e.code&&(t.pagecount=e.data.pagecount,t.tableData=e.data.list,t.tableloading=!1)})},handleCurrentChange:function(t){this.page=t,this.getData()},handleFinish:function(t){var e=this;this.$confirm("确认通过吗？","提示",{}).then(function(){Ua({id:t}).then(function(t){200==t.code?(e.$message({message:t.msg,type:"success"}),e.getData()):e.$message({message:t.msg,type:"warning"})})})}},mounted:function(){this.getData()}},oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"user_name",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(1==e.row.type?"支付宝":"银行卡")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"alipay_account",label:"支付宝号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bank_number",label:"银行卡号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bank_name",label:"银行名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status_name",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"withdraw_money",label:"金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"withdraw_service_charge_money",label:"手续费"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_time",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("el-button",{on:{click:function(a){return t.handleFinish(e.row.id)}}},[t._v("通过")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-count":t.pagecount},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]},se=a("VU/8")(re,oe,!1,null,null,null).exports,ne={data:function(){return{tableData:[],page:1,pagecount:1,tableloading:!0,user_name:"",money_type:0,change_type:0,beg_time:"",end_time:"",money_typeoption:[{label:"全部类型",value:0},{label:"积分",value:1},{label:"余额",value:2}],change_typeoption:[{label:"全部类型",value:0},{label:"系统转账",value:1},{label:"用户消费",value:2},{label:"返佣奖励",value:3},{label:"申请提现",value:4},{label:"提现成功",value:5},{label:"领导奖奖励",value:6},{label:"业绩奖奖励",value:7},{label:"积分转出",value:8},{label:"积分转入",value:9},{label:"用户退款",value:10},{label:"奖励金转换积分",value:11},{label:"每月终生成就奖奖励",value:12}]}},methods:{getData:function(){var t=this;this.tableloading=!0;var e={page:this.page};this.user_name&&(e.user_name=this.user_name),this.money_type&&(e.money_type=this.money_type),this.change_type&&(e.change_type=this.change_type),this.beg_time&&(e.beg_time=this.beg_time),this.end_time&&(e.end_time=this.end_time),Ya(e).then(function(e){200==e.code&&(t.pagecount=e.data.pagecount,t.tableData=e.data.list,t.tableloading=!1)})},handleCurrentChange:function(t){this.page=t,this.getData()}},mounted:function(){this.getData()}},le={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-col",{staticClass:"toolbar",staticStyle:{},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"输入用户名搜索"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getData()}},model:{value:t.user_name,callback:function(e){t.user_name=e},expression:"user_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"积分/余额"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getData},model:{value:t.money_type,callback:function(e){t.money_type=e},expression:"money_type"}},t._l(t.money_typeoption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getData},model:{value:t.change_type,callback:function(e){t.change_type=e},expression:"change_type"}},t._l(t.change_typeoption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.beg_time,callback:function(e){t.beg_time=e},expression:"beg_time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getData()}}},[t._v("搜索")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"vip_code",label:"会员ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"money_type_name",label:"积分/余额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"change_type_name",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"change_desc",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prize_money",label:"奖励金流水"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_money",label:"积分流水"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_time",label:"时间"}})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-count":t.pagecount},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]},de=a("VU/8")(ne,le,!1,null,null,null).exports,ce={data:function(){return{tableData:[],page:1,pagecount:1,tableloading:!0,editForm:{},editFormVisible:!1}},methods:{getData:function(){var t=this;this.tableloading=!0,Ba({page:this.page}).then(function(e){200==e.code&&(t.pagecount=e.data.pagecount,t.tableData=e.data.list,t.tableloading=!1)})},handleCurrentChange:function(t){this.page=t,this.getData()},handleEdit:function(t){this.editFormVisible=!0,this.editForm=t},editSubmit:function(t){var e=this,a=this;this.$confirm("确认切换吗？","提示",{}).then(function(){Ja(e.editForm).then(function(t){200==t.code?(a.$message({message:t.msg,type:"success"}),a.editFormVisible=!1,a.getData()):a.$message({message:t.msg,type:"warning"})})})}},mounted:function(){this.getData()},watch:{editFormVisible:function(t,e){t||this.getData()}}},ue={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"状态/比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.id?a("span",[t._v(t._s(1==e.row.value?"启用":"关闭"))]):a("span",[t._v(t._s(e.row.value))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"updated_time",label:"更新时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"150px"}},[1==t.editForm.id?a("el-form-item",{attrs:{label:"启用",prop:"value"}},[a("el-radio-group",{model:{value:t.editForm.value,callback:function(e){t.$set(t.editForm,"value",e)},expression:"editForm.value"}},[a("el-radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:"0"}},[t._v("否")])],1)],1):a("el-form-item",{attrs:{label:"比例",prop:"value"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.value,callback:function(e){t.$set(t.editForm,"value",e)},expression:"editForm.value"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]},me=a("VU/8")(ce,ue,!1,null,null,null).exports;o.default.use(F.a);var pe=[{path:"/login",component:S,name:"",hidden:!0},{path:"/404",component:V,name:"",hidden:!0},{path:"/",component:A,iconCls:"fa fa-home",hidden:!0,leaf:!0,children:[{path:"/main",component:z,name:"主页",hidden:!1},{path:"/back/info/:id",component:kt,name:"退货单详情",hidden:!0},{path:"/order/info/:id",component:Vt,name:"订单详情",hidden:!0,meta:{keepAlive:!1}},{path:"/goods/edit",component:Z,name:"商品编辑",hidden:!0},{path:"/goods/add",component:tt,name:"新增商品",hidden:!0},{path:"/goods/spot/:id",component:it,name:"现货管理",hidden:!0}]}],_e={path:"*",hidden:!0,redirect:{path:"/404"}},he={path:"/",component:A,iconCls:"fa fa-wheelchair-alt",leaf:!0,children:[]},fe=[{path:"/",component:A,name:"商品管理",iconCls:"fa fa-shopping-cart",children:[{path:"/goods/lists",component:M,name:"商品列表"},{path:"/goodstype/lists",component:dt,name:"商品类型"},{path:"/goodsattr/lists",component:st,name:"商品属性"},{path:"/category/lists",component:mt,name:"商品分类"}]},{path:"/",component:A,name:"订单管理",iconCls:"fa fa-book",children:[{path:"/order/lists",component:bt,name:"订单列表",meta:{keepAlive:!0}},{path:"/back/lists",component:$t,name:"退货单列表",meta:{keepAlive:!0}}]},{path:"/",component:A,name:"页面管理",iconCls:"fa fa-sticky-note",children:[{path:"/hometheme/lists",component:Rt,name:"首页主题管理"},{path:"/carousel/lists",component:Et,name:"广告管理"},{path:"/nav/lists",component:Tt,name:"导航栏管理"}]},{path:"/",component:A,name:"会员管理",iconCls:"fa fa-ticket",children:[{path:"/member/lists",component:te,name:"会员列表"},{path:"/setting/lists",component:Zt,name:"会员等级基本设置"},{path:"/umbrella/relation",component:ie,name:"会员伞下关系"}]},{path:"/",component:A,name:"财务管理",iconCls:"fa fa-money",children:[{path:"/withdraw/lists",component:se,name:"提现申请列表",meta:{keepAlive:!0}},{path:"/accountlog/lists",component:de,name:"会员流水列表",meta:{keepAlive:!0}}]},{path:"/",component:A,name:"系统管理",iconCls:"fa fa-cog",children:[{path:"/systemsetting/lists",component:me,name:"基本配置",meta:{keepAlive:!0}}]},{path:"/",component:A,name:"权限管理",iconCls:"fa fa-user-o",children:[{path:"/privilege/lists",component:Jt,name:"管理员列表"}]}],ge=new F.a({routes:pe});ge.beforeEach(function(t,e,a){var i=JSON.parse(sessionStorage.getItem("data"));if("/login"==t.path&&sessionStorage.removeItem("data"),i||"/login"==t.path?a():a({path:"/login"}),"/login"==e.path)i=JSON.parse(sessionStorage.getItem("data"));if(ge.options.routes.length<=4&&i){for(var r in fe)for(var o in i.data.menu)if(i.data.menu[o].title==fe[r].name){var s=[];for(var n in i.data.menu[o].child)for(var l in fe[r].children)i.data.menu[o].child[n].title==fe[r].children[l].name&&s.push(fe[r].children[l]);fe[r].children=s,pe.push(fe[r])}pe.push(_e),pe.push(he),ge.addRoutes(pe)}});var ve=ge,be=y.a.create({headers:{"content-type":"application/json"}});be.interceptors.request.use(function(t){var e=JSON.parse(sessionStorage.getItem("data"));return e&&(t.headers={accesstoken:e.data.accessToken}),t},function(t){return m.Notification.error({title:"重新登录",message:"重新登录"}),v.a.reject(t)}),be.interceptors.response.use(function(t){return v.a.resolve(t)},function(t){return"Expired token"==t.response.data.msg?(ve.replace({path:"/login"}),v.a.reject(t)):(m.Notification.error({title:"网络请求错误",message:t.response.data.msg}),v.a.reject(t))});var ye="/dashboard",Fe=function(t){return be.post(ye+"/auth/login",t).then(function(t){return t.data})},ke=function(t){return be.get(ye+"/order/getRegions",{params:t}).then(function(t){return t.data})},we=function(t){return be.get(ye+"/carousel/lists?limit=1000",{params:t}).then(function(t){return t.data})},xe=function(t){return be.post(ye+"/carousel/add",t).then(function(t){return t.data})},$e=function(t){return be.delete(ye+"/carousel/delete",{params:t}).then(function(t){return t.data})},Se=function(t){return be.post(ye+"/carousel/edit",t).then(function(t){return t.data})},Le=function(t){return be.get("/v1/category/product_list/cat_id/"+t+"/limit/10000/beon")},Ve=function(t){return be.post(ye+"/nav/add",t).then(function(t){return t.data})},Ce=function(t){return be.post(ye+"/nav/edit",t).then(function(t){return t.data})},De=function(t){return be.get(ye+"/nav/lists?limit=50",{params:t}).then(function(t){return t.data})},Oe=function(t){return be.delete(ye+"/nav/delete",{params:t}).then(function(t){return t.data})},Ie=function(t){return be.post(ye+"/hometheme/add",t)},Ee=function(t){return be.post(ye+"/hometheme/edit",t)},Ne=function(t){return be.get(ye+"/hometheme/lists?limit=1000",{params:t})},Ae=function(t){return be.delete(ye+"/hometheme/delete",{params:t})},Re=function(t){return be.get(ye+"/category/lists?type=1",{params:t})},ze=function(t){return be.post(ye+"/category/add",t)},je=function(t){return be.post(ye+"/category/edit",t)},Te=function(t){return be.delete(ye+"/category/delete",{params:t})},Me=function(t){return be.post(ye+"/clearCache",t).then(function(t){return t.data})},He=function(t){return be.post(ye+"/clearProducts",t).then(function(t){return t.data})},qe=function(t){return be.post(ye+"/ajax/upload",t)},Pe=function(t){return be.get(ye+"/ajax/search",{params:t})},Ge=function(t){return be.get(ye+"/ajax/search_new",{params:t}).then(function(t){return t.data})},Ue=function(t){return be.get(ye+"/privilege/lists",{params:t})},Ye=function(t){return be.post(ye+"/privilege/add",t).then(function(t){return t.data})},Be=function(t){return be.put(ye+"/privilege/allot",t).then(function(t){return t.data})},Je=function(t){return be.get(ye+"/privilege/allot",{params:t})},Ke=function(t){return be.put(ye+"/privilege/repassword",t).then(function(t){return t.data})},Xe=function(t){return be.get(ye+"/delivery/lists",{params:t})},Ze=function(t){return be.get(ye+"/refund/lists",{params:t})},Qe=function(t){return be.get(ye+"/refund/info",{params:t})},We=function(t){return be.post(ye+"/refund/back",t).then(function(t){return t.data})},ta=function(t){return be.post(ye+"/refund/cancel_back",t).then(function(t){return t.data})},ea=function(t){return be.get(ye+"/goodstype/lists",{params:t})},aa=function(t){return be.post(ye+"/goodstype/add",t).then(function(t){return t.data})},ia=function(t){return be.post(ye+"/goodstype/edit",t).then(function(t){return t.data})},ra=function(t){return be.delete(ye+"/goodstype/delete",{params:t})},oa=function(t){return be.get(ye+"/goodsattr/selected",{params:t})},sa=function(t){return be.get(ye+"/goodsattr/selected_list",{params:t})},na=function(t){return be.get(ye+"/goodsattr/lists",{params:t})},la=function(t){return be.post(ye+"/goodsattr/add",t).then(function(t){return t.data})},da=function(t){return be.post(ye+"/goodsattr/edit",t).then(function(t){return t.data})},ca=function(t){return be.delete(ye+"/goodsattr/delete",{params:t})},ua=function(t){return be.get(ye+"/commentuser/lists",{params:t})},ma=function(t){return be.get(ye+"/commentuser/info",{params:t})},pa=function(t){return be.post(ye+"/commentuser/edit",t).then(function(t){return t.data})},_a=function(t){return be.post(ye+"/commentuser/send",t).then(function(t){return t.data})},ha=function(t){return be.put(ye+"/commentuser/enable",t).then(function(t){return t.data})},fa=function(t){return be.get(ye+"/goods/lists",{params:t})},ga=function(t){return be.post(ye+"/goods/edit",t).then(function(t){return t.data})},va=function(t){return be.post(ye+"/goods/update_sale",t).then(function(t){return t.data})},ba=function(t){return be.post(ye+"/goods/sup_insert",t).then(function(t){return t.data})},ya=function(t){return be.get(ye+"/goods/goods_attr",{params:t})},Fa=function(t){return be.get(ye+"/goods/product_list",{params:t})},ka=function(t){return be.get(ye+"/goods/products",{params:t})},wa=function(t){return be.post(ye+"/goods/products_add",t)},xa=function(t){return be.post(ye+"/goods/products_edit",t)},$a=function(t){return be.delete(ye+"/goods/products_delete",{params:t})},Sa=function(t){return be.get(ye+"/goods/sup_edit",{params:t})},La=function(t){return be.get(ye+"/goods/sup_delete",{params:t})},Va=function(t){return be.get(ye+"/goods/order",{params:t})},Ca=function(t){return be.get(ye+"/ajax/region",{params:t})},Da=function(t){return be.get(ye+"/order/lists",{params:t})},Oa=function(t){return be.get(ye+"/order/logistics_type",{params:t})},Ia=function(t){return be.post(ye+"/order/fahuo",t).then(function(t){return t.data})},Ea=function(t){return be.get(ye+"/order/info",{params:t})},Na=function(t){return be.get(ye+"/member/lists",{params:t})},Aa=function(t){return be.post(ye+"/member/send_point",t).then(function(t){return t.data})},Ra=function(t){return be.get(ye+"/member/consume_list",{params:t}).then(function(t){return t.data})},za=function(t){return be.get(ye+"/member/thankful_info",{params:t}).then(function(t){return t.data})},ja=function(t){return be.post(ye+"/member/thankful_set",t).then(function(t){return t.data})},Ta=function(t){return be.get(ye+"/vip/setting",{params:t}).then(function(t){return t.data})},Ma=function(t){return be.post(ye+"/vip/setting",t).then(function(t){return t.data})},Ha=function(t){return be.put(ye+"/vip/setting/"+t.id,t).then(function(t){return t.data})},qa=function(t){return be.get(ye+"/umbrella/relation/top_user",{params:t}).then(function(t){return t.data})},Pa=function(t){return be.get(ye+"/umbrella/relation/down_user",{params:t}).then(function(t){return t.data})},Ga=function(t){return be.get(ye+"/treasure/withdraw",{params:t}).then(function(t){return t.data})},Ua=function(t){return be.post(ye+"/treasure/withdraw/finish",t).then(function(t){return t.data})},Ya=function(t){return be.get(ye+"/treasure/account_log",{params:t}).then(function(t){return t.data})},Ba=function(t){return be.get(ye+"/system/setting",{params:t}).then(function(t){return t.data})},Ja=function(t){return be.put(ye+"/system/setting/"+t.id,t).then(function(t){return t.data})},Ka=function(t){return t.count},Xa=function(t){return t.token},Za=function(t){return t.vx_order_info};o.default.use(l.a);var Qa={SETTOKEN:function(t){if(JSON.parse(sessionStorage.getItem("data"))){var e=JSON.parse(sessionStorage.getItem("data"));t.token.accessToken=e.data.accessToken}},QUERYORDERINFO:function(t,e){t.vx_order_info=e.data},INCREMENT:function(t){t.count++},DECREMENT:function(t){t.count--}},Wa=new l.a.Store({actions:i,getters:r,state:{count:10,logining:!1,products:[],token:{accessToken:""},vx_order_info:""},mutations:Qa}),ti=a("kwPQ"),ei=a.n(ti),ai={install:function(t,e){function a(t,e){for(var a=e.length,i=[];a--;)i.push(t[e[a]]);return i.join("|")}t.prototype.setcookie=function(t,e,a){var i=new Date;i.setDate(i.getDate()+a),document.cookie=t+"="+e+";expires="+i},t.prototype.getcookie=function(t){for(var e=document.cookie.split("; "),a=0;a<e.length;a++){var i=e[a].split("=");if(t==i[0])return i[1]}return!1},t.prototype.checkedarr=function(t){for(var e=[],a=0,i=t.length;a<i;a++)-1===e.indexOf(t[a].id)&&e.push(t[a]);return e},t.prototype.uniqeByKeys=function(t,e){for(var i=[],r={},o=0,s=t.length;o<s;o++){var n=a(t[o],e);n in r||(r[n]=!0,i.push(t[o]))}return i},t.prototype.removeObjWithArr=function(t,e){for(var a=t.length,i=0;i<a;i++)if(t[i]==e)return 0==i?void t.shift():i==a-1?void t.pop():void t.splice(i,1)},t.prototype.changetime=function(t){var e=new Date(t),a=e.getMonth()+1,i=e.getDate();a>=1&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i);var r=e.getHours(),o=e.getMinutes(),s=e.getSeconds();return r>=0&&r<=9&&(r="0"+r),o>=0&&o<=9&&(o="0"+o),s>=0&&s<=9&&(s="0"+s),e.getFullYear()+"-"+a+"-"+i+" "+r+":"+o+":"+s},t.prototype.changeSeconds=function(t){var e=new Date(t),a=e.getMonth()+1,i=e.getDate();a>=1&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i);var r=e.getHours(),o=e.getMinutes();e.getSeconds();return r>=0&&r<=9&&(r="0"+r),o>=0&&o<=9&&(o="0"+o),"00",e.getFullYear()+"-"+a+"-"+i+" "+r+":"+o+":00"},t.prototype.changetimestamp=function(t){if(0==/^\d+$/.test(t)){var e=Date.parse(new Date(t));return e/=1e3}return t},t.prototype.changeswitch=function(t){return 1==t?"1":"0"},t.prototype.backswitch=function(t){return 1==t},t.prototype.exportExcel=function(){return function(t,e){t.nodeType||(t=document.getElementById(t));var a,i={worksheet:e||"Worksheet",table:t.innerHTML};window.location.href="data:application/vnd.ms-excel;base64,"+function(t){return window.btoa(unescape(encodeURIComponent(t)))}((a=i,'<html><head><meta charset="UTF-8"></head><body><tbody>{table}</tbody></body></html>'.replace(/{(\w+)}/g,function(t,e){return a[e]})))}}}},ii=a("g6v0"),ri=a.n(ii),oi=(a("g3Gj"),a("XLwt")),si=a.n(oi);o.default.use(ri.a,{language:"zh-cn",i18n:{"zh-cn":{align:"对齐方式",image:"图片",list:"列表",link:"链接",unlink:"去除链接",table:"表格",font:"文字","full screen":"全屏",text:"排版",eraser:"格式清除",info:"关于",color:"颜色","please enter a url":"请输入地址","create link":"创建链接",bold:"加粗",italic:"倾斜",underline:"下划线","strike through":"删除线",subscript:"上标",superscript:"下标",heading:"标题","font name":"字体","font size":"文字大小","left justify":"左对齐","center justify":"居中","right justify":"右对齐","ordered list":"有序列表","unordered list":"无序列表","fore color":"前景色","background color":"背景色","row count":"行数","column count":"列数",save:"确定",upload:"上传",progress:"进度",unknown:"未知","please wait":"请稍等",error:"错误",abort:"中断",reset:"重置",insertHTML:"insertHTML"}},image:{sizeLimit:524288e4,upload:{url:"/dashboard/ajax/upload",headers:{},params:{},fieldName:"img"},compress:{width:1600,height:1600,quality:80},uploadHandler:function(t){var e=JSON.parse(t);if(200==e.code)return e.data.img_url;alert(e.msg)}}}),o.default.use(ai),o.default.use(p.a,{size:"mini"}),o.default.use(l.a),o.default.component("VueImgInputer",ei.a),o.default.prototype.$echarts=si.a,new o.default({router:ve,store:Wa,render:function(t){return t(u)}}).$mount("#app")},NKgp:function(t,e){},VPTJ:function(t,e){},"Za/7":function(t,e){},ZsaA:function(t,e){},"e/my":function(t,e){},e0XP:function(t,e){},fvI9:function(t,e){},g3Gj:function(t,e){},tvR6:function(t,e){},wCN1:function(t,e){},xOV4:function(t,e){},zHf6:function(t,e){}},["NHnr"]);